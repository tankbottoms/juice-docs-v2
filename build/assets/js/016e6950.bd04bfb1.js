"use strict";(self.webpackChunkjuice_docs_v_2=self.webpackChunkjuice_docs_v_2||[]).push([[33314],{3905:(e,n,t)=>{t.d(n,{Zo:()=>p,kt:()=>m});var r=t(67294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var c=r.createContext({}),s=function(e){var n=r.useContext(c),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},p=function(e){var n=s(e.components);return r.createElement(c.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},u=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,o=e.originalType,c=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),u=s(t),m=a,f=u["".concat(c,".").concat(m)]||u[m]||d[m]||o;return t?r.createElement(f,i(i({ref:n},p),{},{components:t})):r.createElement(f,i({ref:n},p))}));function m(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var o=t.length,i=new Array(o);i[0]=u;var l={};for(var c in n)hasOwnProperty.call(n,c)&&(l[c]=n[c]);l.originalType=e,l.mdxType="string"==typeof e?e:a,i[1]=l;for(var s=2;s<o;s++)i[s]=t[s];return r.createElement.apply(null,i)}return r.createElement.apply(null,t)}u.displayName="MDXCreateElement"},13422:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>d,frontMatter:()=>o,metadata:()=>l,toc:()=>s});var r=t(87462),a=(t(67294),t(3905));const o={sidebar_position:2},i="Basics",l={unversionedId:"dev/build/basics",id:"dev/build/basics",title:"Basics",description:"Workflows",source:"@site/docs/dev/build/basics.md",sourceDirName:"dev/build",slug:"/dev/build/basics",permalink:"/dev/build/basics",draft:!1,editUrl:"https://github.com/jbx-protocol/juice-docs-v2/blob/main/docs/dev/build/basics.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"dev",previous:{title:"Getting started",permalink:"/dev/build/getting-started"},next:{title:"Project NFT",permalink:"/dev/build/project-nft"}},c={},s=[{value:"Workflows",id:"workflows",level:4}],p={toc:s};function d(e){let{components:n,...t}=e;return(0,a.kt)("wrapper",(0,r.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"basics"},"Basics"),(0,a.kt)("h4",{id:"workflows"},"Workflows"),(0,a.kt)("p",null,"The first transaction to call when getting started is ",(0,a.kt)("a",{parentName:"p",href:"/dev/api/contracts/or-controllers/jbcontroller/write/launchprojectfor"},(0,a.kt)("inlineCode",{parentName:"a"},"JBController.launchProjectFor(...)")),"."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"function launchProjectFor(\n  address _owner,\n  JBProjectMetadata calldata _projectMetadata,\n  JBFundingCycleData calldata _data,\n  JBFundingCycleMetadata calldata _metadata,\n  uint256 _mustStartAtOrAfter,\n  JBGroupedSplits[] calldata _groupedSplits,\n  JBFundAccessConstraints[] calldata _fundAccessConstraints,\n  IJBPaymentTerminal[] calldata _terminals,\n  string memory _memo\n) external override returns (uint256 projectId) { ... }\n")),(0,a.kt)("p",null,"Check out the ",(0,a.kt)("a",{parentName:"p",href:"/dev/build/programmable-treasury"},"Treasury design")," page for more info on how to build projects treasuries to various specifications."),(0,a.kt)("details",null,(0,a.kt)("summary",null,"View project info"),(0,a.kt)("p",null,"Launching a project will mint a new NFT in the ",(0,a.kt)("a",{parentName:"p",href:"/dev/api/contracts/jbprojects/"},(0,a.kt)("inlineCode",{parentName:"a"},"JBProjects"))," contract. The owner can be found using ",(0,a.kt)("a",{parentName:"p",href:"https://docs.openzeppelin.com/contracts/4.x/api/token/erc721#IERC721-ownerOf-uint256-"},(0,a.kt)("inlineCode",{parentName:"a"},"JBProjects.ownerOf(...)")),"."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"function ownerOf(uint256 _projectId) external returns (address owner) { ... }\n")),(0,a.kt)("p",null,"The project's metadata can be found using ",(0,a.kt)("a",{parentName:"p",href:"/dev/api/contracts/jbprojects/properties/metadatacontentof"},(0,a.kt)("inlineCode",{parentName:"a"},"JBProjects.metadataContentOf(...)")),"."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"function metadataContentOf(uint256 _projectId, uint256 _domain)\n  external\n  view\n  returns (string memory) { ... }\n"))),(0,a.kt)("details",null,(0,a.kt)("summary",null,"View funding cycles"),(0,a.kt)("p",null,"Funding cycle data can be found in the ",(0,a.kt)("a",{parentName:"p",href:"/dev/api/contracts/jbfundingcyclestore/"},(0,a.kt)("inlineCode",{parentName:"a"},"JBFundingCycleStore"))," contract. A funding cycle configuration can be found using ",(0,a.kt)("a",{parentName:"p",href:"/dev/api/contracts/jbfundingcyclestore/read/get"},(0,a.kt)("inlineCode",{parentName:"a"},"JBFundingCycleStore.get(...)")),", where ",(0,a.kt)("inlineCode",{parentName:"p"},"_configuration")," is the block timestamp when the funding cycle was configured, or using ",(0,a.kt)("a",{parentName:"p",href:"/dev/api/contracts/or-controllers/jbcontroller/read/getfundingcycleof"},(0,a.kt)("inlineCode",{parentName:"a"},"JBController.getFundingCycleOf(...)"))," if the funding cycle's metadata is needed alongside."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"function get(uint256 _projectId, uint256 _configuration)\n  external\n  view\n  override\n  returns (JBFundingCycle memory fundingCycle) { ... }\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"function getFundingCycleOf(uint256 _projectId, uint256 _configuration)\n  external\n  view\n  override\n  returns (JBFundingCycle memory fundingCycle, JBFundingCycleMetadata memory metadata) { ... }\n")),(0,a.kt)("p",null,"The project's current funding cycle can be found using ",(0,a.kt)("a",{parentName:"p",href:"/dev/api/contracts/jbfundingcyclestore/read/currentof"},(0,a.kt)("inlineCode",{parentName:"a"},"JBFundingCycleStore.currentOf(...)")),", or using ",(0,a.kt)("a",{parentName:"p",href:"/dev/api/contracts/or-controllers/jbcontroller/read/currentfundingcycleof"},(0,a.kt)("inlineCode",{parentName:"a"},"JBController.currentFundingCycleOf(...)"))," if the funding cycle's metadata is needed alongside."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"function currentOf(uint256 _projectId)\n  external\n  view\n  override\n  returns (JBFundingCycle memory fundingCycle) { ... }\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"function currentFundingCycleOf(uint256 _projectId)\n  external\n  view\n  override\n  returns (JBFundingCycle memory fundingCycle, JBFundingCycleMetadata memory metadata) { ... }\n")),(0,a.kt)("p",null,"The project's queued funding cycle can be found using ",(0,a.kt)("a",{parentName:"p",href:"/dev/api/contracts/jbfundingcyclestore/read/queuedof"},(0,a.kt)("inlineCode",{parentName:"a"},"JBFundingCycleStore.queuedOf(...)")),", or using ",(0,a.kt)("a",{parentName:"p",href:"/dev/api/contracts/or-controllers/jbcontroller/read/queuedfundingcycleof"},(0,a.kt)("inlineCode",{parentName:"a"},"JBController.queuedFundingCycleOf(...)"))," if the funding cycle's metadata is needed alongside."),(0,a.kt)("p",null,"By default, the queued cycle is a copy of the current one that starts immediately afterwards, using a discounted weight."),(0,a.kt)("p",null,"If the project has proposed a reconfiguration, the queued cycle will reflect the changes once they are approved by the current cycle's ballot. Reconfigurations during a funding cycle with no ballot are automatically queued."),(0,a.kt)("p",null,"The project has no queued cycle if the current cycle has no duration."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"function queuedOf(uint256 _projectId)\n  external\n  view\n  override\n  returns (JBFundingCycle memory fundingCycle) { ... }\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"function queuedFundingCycleOf(uint256 _projectId)\n  external\n  view\n  override\n  returns (JBFundingCycle memory fundingCycle, JBFundingCycleMetadata memory metadata) { ... }\n")),(0,a.kt)("p",null,"The project's latest configured funding cycle can be found using ",(0,a.kt)("a",{parentName:"p",href:"/dev/api/contracts/jbfundingcyclestore/read/latestconfiguredof"},(0,a.kt)("inlineCode",{parentName:"a"},"JBFundingCycleStore.latestConfiguredOf(...)")),", or using ",(0,a.kt)("a",{parentName:"p",href:"/dev/api/contracts/or-controllers/jbcontroller/read/latestconfiguredfundingcycleof"},(0,a.kt)("inlineCode",{parentName:"a"},"JBController.latestConfiguredFundingCycleOf(...)"))," if the funding cycle's metadata is needed alongside. These calls also return the current ballot status for the configuration."),(0,a.kt)("p",null,"If the latest configured funding cycle's ballot is ",(0,a.kt)("inlineCode",{parentName:"p"},"Approved"),", the configuration should also be queued or current. "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"function latestConfiguredOf(uint256 _projectId)\n  external\n  view\n  override\n  returns (JBFundingCycle memory fundingCycle, JBBallotState ballotState) { ... }\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"function latestConfiguredFundingCycleOf(uint256 _projectId)\n  external\n  view\n  override\n  returns (\n    JBFundingCycle memory fundingCycle,\n    JBFundingCycleMetadata memory metadata,\n    JBBallotState ballotState\n  ) { ... }\n"))),(0,a.kt)("details",null,(0,a.kt)("summary",null,"View splits"),(0,a.kt)("p",null,"A project's splits data can be found in the ",(0,a.kt)("a",{parentName:"p",href:"/dev/api/contracts/jbsplitsstore/"},(0,a.kt)("inlineCode",{parentName:"a"},"JBSplitStore"))," contract. A group of splits belonging to any particular group during any particular funding cycle configuration can be found using ",(0,a.kt)("a",{parentName:"p",href:"/dev/api/contracts/jbsplitsstore/read/splitsof"},(0,a.kt)("inlineCode",{parentName:"a"},"JBSplitStore.splitsOf(...)")),". The funding cycle's configuration is used as the ",(0,a.kt)("inlineCode",{parentName:"p"},"_domain")," within which the splits apply."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"function splitsOf(\n  uint256 _projectId,\n  uint256 _domain,\n  uint256 _group\n) external view override returns (JBSplit[] memory) { ... }\n"))),(0,a.kt)("details",null,(0,a.kt)("summary",null,"View fund access constraints"),(0,a.kt)("p",null,"Constraints on accessing a project's funds can found in the ",(0,a.kt)("a",{parentName:"p",href:"/dev/api/contracts/or-controllers/jbcontroller"},(0,a.kt)("inlineCode",{parentName:"a"},"JBController"))," contract used to launch the project. The distribution limit of any payment terminal during any funding cycle configuration can be found using ",(0,a.kt)("a",{parentName:"p",href:"/dev/api/contracts/or-controllers/jbcontroller/read/distributionlimitof"},(0,a.kt)("inlineCode",{parentName:"a"},"JBController.distributionLimitOf(...)")),". The currency being used for this distribution limit is returned alongside."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"function distributionLimitOf(\n  uint256 _projectId,\n  uint256 _configuration,\n  IJBPaymentTerminal _terminal,\n  address _token\n) external view override returns (uint256 distributionLimit, uint256 distributionLimitCurrency) { ... }\n")),(0,a.kt)("p",null,"The overflow allowance from any payment terminal during any funding cycle configuration can be found using ",(0,a.kt)("a",{parentName:"p",href:"/dev/api/contracts/or-controllers/jbcontroller/read/overflowallowanceof"},(0,a.kt)("inlineCode",{parentName:"a"},"JBController.overflowAllowanceOf(...)")),". The currency being used for this overflow allowance is returned alongside. "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"function overflowAllowanceOf(\n  uint256 _projectId,\n  uint256 _configuration,\n  IJBPaymentTerminal _terminal,\n  address _token\n) external view override returns (uint256 overflowAllowance, uint256 overflowAllowanceCurrency) { ... }\n"))),(0,a.kt)("details",null,(0,a.kt)("summary",null,"View terminals and controller"),(0,a.kt)("p",null,"The ",(0,a.kt)("a",{parentName:"p",href:"/dev/api/contracts/jbdirectory/"},(0,a.kt)("inlineCode",{parentName:"a"},"JBDirectory"))," contract stores addresses of payment terminals that a project is currently accepting funds through. A project's currently set terminals can be found using ",(0,a.kt)("a",{parentName:"p",href:"/dev/api/contracts/jbdirectory/read/terminalsof"},(0,a.kt)("inlineCode",{parentName:"a"},"JBDirectory.terminalsOf(...)")),"."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"function terminalsOf(uint256 _projectId) external view override returns (IJBPaymentTerminal[] memory) { ... }\n")),(0,a.kt)("p",null,"If a project has multiple terminals for the same token, the primary terminal that it wishes to accept that token type through can be found using ",(0,a.kt)("a",{parentName:"p",href:"/dev/api/contracts/jbdirectory/read/primaryterminalof"},(0,a.kt)("inlineCode",{parentName:"a"},"JBDirectory.primaryTerminalOf(...)")),"."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"function primaryTerminalOf(uint256 _projectId, address _token)\n  public\n  view\n  override\n  returns (IJBPaymentTerminal) { ... }\n")),(0,a.kt)("p",null,"The ",(0,a.kt)("a",{parentName:"p",href:"/dev/api/contracts/jbdirectory/"},(0,a.kt)("inlineCode",{parentName:"a"},"JBDirectory"))," contract also stores the address of the controller that is managing a project's funding cycles and tokens. A projects current terminal can be found using ",(0,a.kt)("a",{parentName:"p",href:"/dev/api/contracts/jbdirectory/properties/controllerof"},(0,a.kt)("inlineCode",{parentName:"a"},"JBDirectory.controllerOf(...)")),"."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"function controllerOf(uint256 _projectId) external view override returns (IJBController) { ... }\n"))),(0,a.kt)("p",null,"Once a project has been created, it can begin accepting funds from anyone through any terminal it has added. For example, if the project has added the ",(0,a.kt)("a",{parentName:"p",href:"/dev/api/contracts/or-payment-terminals/jbethpaymentterminal"},(0,a.kt)("inlineCode",{parentName:"a"},"JBETHPaymentTerminal")),", ETH can be sent to the project by calling its ",(0,a.kt)("a",{parentName:"p",href:"/dev/api/contracts/or-payment-terminals/or-abstract/jbpayoutredemptionpaymentterminal/write/pay"},(0,a.kt)("inlineCode",{parentName:"a"},"JBETHPaymentTerminal.pay(...)"))," transaction."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"function pay(\n  uint256 _projectId,\n  uint256 _amount,\n  address,\n  address _beneficiary,\n  uint256 _minReturnedTokens,\n  bool _preferClaimedTokens,\n  string calldata _memo,\n  bytes calldata _metadata\n) external payable virtual override isTerminalOf(_projectId) returns (uint256) { ... }\n")),(0,a.kt)("details",null,(0,a.kt)("summary",null,"View treasury balance"),(0,a.kt)("p",null,"In payment terminals based on the ",(0,a.kt)("a",{parentName:"p",href:"/dev/api/contracts/or-payment-terminals/or-abstract/jbpayoutredemptionpaymentterminal"},(0,a.kt)("inlineCode",{parentName:"a"},"JBPayoutRedemptionPaymentTerminal")),", such as ",(0,a.kt)("a",{parentName:"p",href:"/dev/api/contracts/or-payment-terminals/jbethpaymentterminal/"},(0,a.kt)("inlineCode",{parentName:"a"},"JBETHPaymentTerminal")),"'s and ",(0,a.kt)("a",{parentName:"p",href:"/dev/api/contracts/or-payment-terminals/jberc20paymentterminal/"},(0,a.kt)("inlineCode",{parentName:"a"},"JBERC20PaymentTerminal")),"'s, a project's treasury balance can be found in its store contract. For example, in the ",(0,a.kt)("a",{parentName:"p",href:"/dev/api/contracts/jbsingletokenpaymentterminalstore/"},(0,a.kt)("inlineCode",{parentName:"a"},"JBSingleTokenPaymentTerminalStore")),", the balance can be found using ",(0,a.kt)("a",{parentName:"p",href:"/dev/api/contracts/jbsingletokenpaymentterminalstore/properties/balanceof"},(0,a.kt)("inlineCode",{parentName:"a"},"JBSingleTokenPaymentTerminalStore.balanceOf(...)")),"."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"function balanceOf(IJBPaymentTerminal _terminal, uint256 _projectId)\n  external\n  view\n  override\n  returns (uint256) { ... }\n")),(0,a.kt)("p",null,"The project's current overflow for a terminal can also be found in the store contracts. For example, in the ",(0,a.kt)("a",{parentName:"p",href:"/dev/api/contracts/jbsingletokenpaymentterminalstore"},(0,a.kt)("inlineCode",{parentName:"a"},"JBSingleTokenPaymentTerminalStore")),", the terminal's overflow can be found using ",(0,a.kt)("a",{parentName:"p",href:"/dev/api/contracts/jbsingletokenpaymentterminalstore/read/currentoverflowof"},(0,a.kt)("inlineCode",{parentName:"a"},"JBSingleTokenPaymentTerminalStore.currentOverflowOf(...)")),"."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"function currentOverflowOf(IJBSingleTokenPaymentTerminal _terminal, uint256 _projectId)\n  external\n  view\n  override\n  returns (uint256) { ... }\n")),(0,a.kt)("p",null,"A terminal store can also resolve the total amount of overflow in all of a project's terminals. For example, in the ",(0,a.kt)("a",{parentName:"p",href:"/dev/api/contracts/jbsingletokenpaymentterminalstore"},(0,a.kt)("inlineCode",{parentName:"a"},"JBSingleTokenPaymentTerminalStore")),", the project's overall overflow can be found using ",(0,a.kt)("a",{parentName:"p",href:"/dev/api/contracts/jbsingletokenpaymentterminalstore/read/currenttotaloverflowof"},(0,a.kt)("inlineCode",{parentName:"a"},"JBSingleTokenPaymentTerminalStore.currentTotalOverflowOf(...)")),". You will need to send the number of decimals you're expecting the returned fixed point number to include, and the currency it is in terms of."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"function currentTotalOverflowOf(\n  uint256 _projectId,\n  uint256 _decimals,\n  uint256 _currency\n) external view override returns (uint256) { ... }\n"))),(0,a.kt)("details",null,(0,a.kt)("summary",null,"View project token distribution"),(0,a.kt)("p",null,"Each holder's balance of a project's token can be found in the ",(0,a.kt)("a",{parentName:"p",href:"/dev/api/contracts/jbtokenstore"},(0,a.kt)("inlineCode",{parentName:"a"},"JBTokenStore"))," contract. The balance can be found using ",(0,a.kt)("a",{parentName:"p",href:"/dev/api/contracts/jbtokenstore/read/balanceof"},(0,a.kt)("inlineCode",{parentName:"a"},"JBTokenStore.balanceOf(...)")),"."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"function balanceOf(address _holder, uint256 _projectId) external view returns (uint256 _result) { ... }\n")),(0,a.kt)("p",null,"The project token's total supply can also be found in the ",(0,a.kt)("a",{parentName:"p",href:"/dev/api/contracts/jbtokenstore"},(0,a.kt)("inlineCode",{parentName:"a"},"JBTokenStore"))," contract using ",(0,a.kt)("a",{parentName:"p",href:"/dev/api/contracts/jbtokenstore/read/totalsupplyof"},(0,a.kt)("inlineCode",{parentName:"a"},"JBTokenStore.totalSupplyOf(...)"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"function totalSupplyOf(uint256 _projectId) external view returns (uint256) { ... }\n"))),(0,a.kt)("details",null,(0,a.kt)("summary",null,"View reserved token balance"),(0,a.kt)("p",null,"A project's undistributed reserved token balance can be found in the project's current controller. For example in the ",(0,a.kt)("a",{parentName:"p",href:"/dev/api/contracts/or-controllers/jbcontroller/"},(0,a.kt)("inlineCode",{parentName:"a"},"JBController")),", this balance can be found using ",(0,a.kt)("a",{parentName:"p",href:"/dev/api/contracts/or-controllers/jbcontroller/read/reservedtokenbalanceof"},(0,a.kt)("inlineCode",{parentName:"a"},"JBController.reservedTokenBalanceOf(...)")),"."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"function reservedTokenBalanceOf(uint256 _projectId, uint256 _reservedRate)\n  external\n  view\n  returns (uint256) { ... }\n")),(0,a.kt)("p",null,"For projects using ",(0,a.kt)("a",{parentName:"p",href:"/dev/api/contracts/or-controller/jbcontroller"},(0,a.kt)("inlineCode",{parentName:"a"},"JBController")),", the project token's total supply including any allocated reserved tokens that have yet to be distributed can be found in using ",(0,a.kt)("a",{parentName:"p",href:"/dev/api/contracts/or-controllers/jbcontroller/read/totaloutstandingtokensof"},(0,a.kt)("inlineCode",{parentName:"a"},"JBController.totalOutstandingTokensOf(...)")),". "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"function totalOutstandingTokensOf(uint256 _projectId, uint256 _reservedRate)\n  external\n  view\n  override\n  returns (uint256) { ... }\n"))),(0,a.kt)("p",null,"Anyone can distribute a project's funds from a terminal up to its current funding cycle's distribution limit to its preprogrammed payout splits at any time. For example, if the project has added the ",(0,a.kt)("a",{parentName:"p",href:"/dev/api/contracts/or-payment-terminals/jbethpaymentterminal"},(0,a.kt)("inlineCode",{parentName:"a"},"JBETHPaymentTerminal")),", funds can be distributed by calling ",(0,a.kt)("a",{parentName:"p",href:"/dev/api/contracts/or-payment-terminals/or-abstract/jbpayoutredemptionpaymentterminal/write/distributepayoutsof"},(0,a.kt)("inlineCode",{parentName:"a"},"JBETHPaymentTerminal.distributePayoutsOf(...)")),"."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"function distributePayoutsOf(\n  uint256 _projectId,\n  uint256 _amount,\n  uint256 _currency,\n  uint256 _minReturnedTokens,\n  string calldata _memo\n) external virtual override returns (uint256 netLeftoverDistributionAmount)  { ... }\n")),(0,a.kt)("details",null,(0,a.kt)("summary",null,"View used distribution limit"),(0,a.kt)("p",null,"Any distribution limit used by a project can be found in the terminal store contract for each terminal. For example, in the ",(0,a.kt)("a",{parentName:"p",href:"/dev/api/contracts/jbsingletokenpaymentterminalstore/"},(0,a.kt)("inlineCode",{parentName:"a"},"JBSingleTokenPaymentTerminalStore")),", the distribution limit used during a funding cycle can be found by calling ",(0,a.kt)("a",{parentName:"p",href:"/dev/api/contracts/jbsingletokenpaymentterminalstore/properties/useddistributionlimitof"},(0,a.kt)("inlineCode",{parentName:"a"},"JBSingleTokenPaymentTerminalStore.usedDistributionLimitOf(...)")),"."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"function usedDistributionLimitOf(\n  IJBPaymentTerminal _terminal,\n  uint256 _projectId,\n  uint256 _fundingCycleNumber\n) external view override returns (uint256) { ... }\n"))),(0,a.kt)("p",null,"A project's owner can distribute additional funds from its treasury's overflow for each of its terminals up until its preconfigured allowance. For example, if the project has added the ",(0,a.kt)("a",{parentName:"p",href:"/dev/api/contracts/or-payment-terminals/jbethpaymentterminal"},(0,a.kt)("inlineCode",{parentName:"a"},"JBETHPaymentTerminal")),", funds can be distributed by calling its ",(0,a.kt)("a",{parentName:"p",href:"/dev/api/contracts/or-payment-terminals/or-abstract/jbpayoutredemptionpaymentterminal/write/useallowanceof"},(0,a.kt)("inlineCode",{parentName:"a"},"JBETHPaymentTerminal.useAllowanceOf(...)"))," transaction. "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"function useAllowanceOf(\n  uint256 _projectId,\n  uint256 _amount,\n  uint256 _currency,\n  uint256 _minReturnedTokens,\n  address payable _beneficiary,\n  string memory _memo\n)\n  external\n  virtual\n  override\n  requirePermission(projects.ownerOf(_projectId), _projectId, JBOperations.USE_ALLOWANCE)\n  returns (uint256 netDistributedAmount) { ... }\n")),(0,a.kt)("details",null,(0,a.kt)("summary",null,"View used overflow allowance"),(0,a.kt)("p",null,"Any overflow allowance used can also be found in the terminal store contracts for each terminal. For example, in the ",(0,a.kt)("a",{parentName:"p",href:"/dev/api/contracts/jbsingletokenpaymentterminalstore/"},(0,a.kt)("inlineCode",{parentName:"a"},"JBSingleTokenPaymentTerminalStore")),", the overflow allowance used during a funding cycle can be found using ",(0,a.kt)("a",{parentName:"p",href:"/dev/api/contracts/jbsingletokenpaymentterminalstore/properties/usedoverflowallowanceof"},(0,a.kt)("inlineCode",{parentName:"a"},"JBSingleTokenPaymentTerminalStore.usedOverflowAllowanceOf(...)")),"."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"function usedOverflowAllowanceOf(\n  IJBPaymentTerminal _terminal,\n  uint256 _projectId,\n  uint256 _fundingCycleNumber\n) external view override returns (uint256) { ... }\n"))),(0,a.kt)("p",null,"The protocol uses price feeds to convert values from one currency to another when distributing payouts, using overflow allowances, issuing project tokens when payments are received in various currencies, and more. Current currency indexes can be found in ",(0,a.kt)("a",{parentName:"p",href:"/dev/api/libraries/jbcurrencies"},(0,a.kt)("inlineCode",{parentName:"a"},"JBCurrencies")),". New currencies and price feeds can be added in the future."),(0,a.kt)("details",null,(0,a.kt)("summary",null,"View price conversions"),(0,a.kt)("p",null,"The same price feeds the protocol uses internally can be accessed externally through the ",(0,a.kt)("a",{parentName:"p",href:"/dev/api/contracts/jbprices/"},(0,a.kt)("inlineCode",{parentName:"a"},"JBPrices"))," contract using ",(0,a.kt)("a",{parentName:"p",href:"/dev/api/contracts/jbprices/read/pricefor"},(0,a.kt)("inlineCode",{parentName:"a"},"JBPrices.priceFor(...)")),". This will revert if a feed is not found for the currency pair provided."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"function priceFor(\n  uint256 _currency,\n  uint256 _base,\n  uint256 _decimals\n) external view override returns (uint256) { ... }\n"))),(0,a.kt)("p",null,"A project's owner can mint more of the project's token by calling ",(0,a.kt)("a",{parentName:"p",href:"/dev/api/contracts/jbtokenstore/write/mintfor"},(0,a.kt)("inlineCode",{parentName:"a"},"JBController.mintTokensOf(...)")),". Anyone can burn their tokens by calling ",(0,a.kt)("a",{parentName:"p",href:"/dev/api/contracts/jbtokenstore/write/burnfrom"},(0,a.kt)("inlineCode",{parentName:"a"},"JBController.burnFrom(...)")),"."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"function mintTokensOf(\n  uint256 _projectId,\n  uint256 _tokenCount,\n  address _beneficiary,\n  string calldata _memo,\n  bool _preferClaimedTokens,\n  bool _useReservedRate\n)\n  external\n  override\n  requirePermissionAllowingOverride(\n    projects.ownerOf(_projectId),\n    _projectId,\n    JBOperations.MINT,\n    directory.isTerminalOf(_projectId, IJBPaymentTerminal(msg.sender))\n  ) { ... }\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"function burnTokensOf(\n  address _holder,\n  uint256 _projectId,\n  uint256 _tokenCount,\n  string calldata _memo,\n  bool _preferClaimedTokens\n)\n  external\n  override\n  nonReentrant\n  requirePermissionAllowingOverride(\n    _holder,\n    _projectId,\n    JBOperations.BURN,\n    directory.isTerminalDelegateOf(_projectId, msg.sender)\n  ) { ... }\n")),(0,a.kt)("p",null,"At any point, anyone can distribute a project's reserved tokens to the project's preprogrammed reserved token splits by calling ",(0,a.kt)("a",{parentName:"p",href:"/dev/api/contracts/or-controllers/jbcontroller/write/distributereservedtokensof"},(0,a.kt)("inlineCode",{parentName:"a"},"JBController.distributeReservedTokensOf(...)")),"."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"function distributeReservedTokensOf(uint256 _projectId, string memory _memo)\n  external\n  nonReentrant\n  returns (uint256) { ... }\n")),(0,a.kt)("p",null,"Anyone who holds a project's tokens can redeem them at one of the project's terminals for a proportional share of the project's overflow. For example, if the project has added the ",(0,a.kt)("a",{parentName:"p",href:"/dev/api/contracts/or-payment-terminals/jbethpaymentterminal"},(0,a.kt)("inlineCode",{parentName:"a"},"JBETHPaymentTerminal")),", ETH can be reclaimed by redeeming project tokens in its ",(0,a.kt)("a",{parentName:"p",href:"/dev/api/contracts/or-payment-terminals/or-abstract/jbpayoutredemptionpaymentterminal/write/redeemtokensof"},(0,a.kt)("inlineCode",{parentName:"a"},"JBETHPaymentTerminal.redeemTokensOf(...)"))," transaction. The overflow amount is the terminal's balance minus the current funding cycle's distribution limit, and can be set to include the project's balance across all terminals."),(0,a.kt)("p",null,"Redeeming tokens allows a project's token holders to exit the community at any time with their share of the funds."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"function redeemTokensOf(\n  address _holder,\n  uint256 _projectId,\n  uint256 _tokenCount,\n  uint256 _minReturnedTokens,\n  address payable _beneficiary,\n  string memory _memo,\n  bytes memory _metadata\n)\n  external\n  virtual\n  override\n  requirePermission(_holder, _projectId, JBOperations.REDEEM)\n  returns (uint256 reclaimAmount) { ... }\n")),(0,a.kt)("p",null,"A project's owner can reconfigure the project's funding cycle at any time by calling ",(0,a.kt)("a",{parentName:"p",href:"/dev/api/contracts/or-controllers/jbcontroller/write/reconfigurefundingcyclesof"},(0,a.kt)("inlineCode",{parentName:"a"},"JBController.reconfigureFundingCyclesOf(...)")),". If the project is in the middle of a funding cycle with a duration, the update will be queued to take effect next cycle. If the current funding cycle has an attached ballot contract, the reconfiguration must be approved by it before taking effect."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"function reconfigureFundingCyclesOf(\n  uint256 _projectId,\n  JBFundingCycleData calldata _data,\n  JBFundingCycleMetadata calldata _metadata,\n  uint256 _mustStartAtOrAfter,\n  JBGroupedSplits[] calldata _groupedSplits,\n  JBFundAccessConstraints[] calldata _fundAccessConstraints,\n  string calldata _memo\n)\n  external\n  virtual\n  override\n  requirePermission(projects.ownerOf(_projectId), _projectId, JBOperations.RECONFIGURE)\n  returns (uint256 configuration){ ... }\n")),(0,a.kt)("details",null,(0,a.kt)("summary",null,"View reconfiguration ballot status"),(0,a.kt)("p",null,"Reconfigurations are subject to the approval of the ballot contract included in the current funding cycle. The current ballot state can be found using ",(0,a.kt)("a",{parentName:"p",href:"/dev/api/contracts/jbfundingcyclestore/read/currentballotstateof"},(0,a.kt)("inlineCode",{parentName:"a"},"JBFundingCycleStore.ballotStateOf(...)")),"."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"function currentBallotStateOf(uint256 _projectId) external view override returns (JBBallotState) { ... } \n"))),(0,a.kt)("p",null,"At any point, anyone can inject funds into a project's treasury via one of its terminals. For example, if the project has added the ",(0,a.kt)("a",{parentName:"p",href:"/dev/api/contracts/or-payment-terminals/jbethpaymentterminal"},(0,a.kt)("inlineCode",{parentName:"a"},"JBETHPaymentTerminal")),", someone can add ETH to a treasury by calling the terminal's ",(0,a.kt)("a",{parentName:"p",href:"/dev/api/contracts/or-payment-terminals/or-abstract/jbpayoutredemptionpaymentterminal/write/addtobalanceof"},(0,a.kt)("inlineCode",{parentName:"a"},"JBETHPaymentTerminal.addToBalanceOf(...)"))," transaction."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"function addToBalanceOf(\n  uint256 _projectId,\n  uint256 _amount,\n  address,\n  string calldata _memo,\n  bytes calldata _metadata\n) external payable virtual override isTerminalOf(_projectId) { ... }\n")),(0,a.kt)("p",null,"By default the protocol uses an internal accounting mechanism to account for projects' tokens. At any time after the project has been created, its owner can issue ERC-20 tokens for the protocol to use as its community token by calling ",(0,a.kt)("a",{parentName:"p",href:"/dev/api/contracts/jbtokenstore/write/issuefor"},(0,a.kt)("inlineCode",{parentName:"a"},"JBController.issueTokenFor(...)")),"."),(0,a.kt)("p",null,"A project can instead bring their own token, so long as the token adheres to the ",(0,a.kt)("a",{parentName:"p",href:"/dev/api/interfaces/ijbtoken"},(0,a.kt)("inlineCode",{parentName:"a"},"IJBToken"))," interface, uses 18 decimals fixed point accounting, and isn't already being used by another project. They can do so by calling ",(0,a.kt)("a",{parentName:"p",href:"/dev/api/contracts/jbtokenstore/write/changefor"},(0,a.kt)("inlineCode",{parentName:"a"},"JBController.changeTokenFor(...)"))," This makes it easy to use ERC-1155s or custom contracts, or to change tokens over time to achieve a more creative design."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"function issueTokenFor(\n  uint256 _projectId,\n  string calldata _name,\n  string calldata _symbol\n)\n  external\n  override\n  requirePermission(projects.ownerOf(_projectId), _projectId, JBOperations.ISSUE)\n  returns (IJBToken token) { ... }\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"function changeTokenOf(\n  uint256 _projectId,\n  IJBToken _token,\n  address _newOwner\n)\n  external\n  nonReentrant\n  requirePermission(projects.ownerOf(_projectId), _projectId, JBOperations.CHANGE_TOKEN) { ... }\n")),(0,a.kt)("details",null,(0,a.kt)("summary",null,"View the project's token"),(0,a.kt)("p",null,"The token currently being used by a project can be found in the ",(0,a.kt)("a",{parentName:"p",href:"/dev/api/contracts/jbtokenstore/"},(0,a.kt)("inlineCode",{parentName:"a"},"JBTokensStore"))," contract by using ",(0,a.kt)("a",{parentName:"p",href:"/dev/api/contracts/jbtokenstore/properties/tokenof"},(0,a.kt)("inlineCode",{parentName:"a"},"JBTokenStore.tokenOf(...)")),". This will return a zero address if the project hasn't yet issued tokens or changed into a custom token. "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"function tokenOf(uint256 _projectId) external view override returns (IJBToken) { ... }\n")),(0,a.kt)("p",null,"The project a token is currently being used for can be found by calling ",(0,a.kt)("a",{parentName:"p",href:"/dev/api/contracts/jbtokenstore/properties/projectof"},(0,a.kt)("inlineCode",{parentName:"a"},"JBTokenStore.projectOf(...)")),"."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"function projectOf(IJBToken _token) external view override returns (uint256) { ... }\n"))),(0,a.kt)("p",null,"If a project has issued an ERC-20s or is using a custom ",(0,a.kt)("a",{parentName:"p",href:"/dev/api/interfaces/ijbtoken"},(0,a.kt)("inlineCode",{parentName:"a"},"IJBToken")),", a holder can claim tokens that are being represented via the internal accounting mechanism into the ERC-20 or custom ",(0,a.kt)("inlineCode",{parentName:"p"},"IJBToken")," by calling ",(0,a.kt)("a",{parentName:"p",href:"/dev/api/contracts/jbtokenstore/write/claimfor"},(0,a.kt)("inlineCode",{parentName:"a"},"JBTokenStore.claimFor(...)")),"."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"function claimFor(\n  address _holder,\n  uint256 _projectId,\n  uint256 _amount\n) external override requirePermission(_holder, _projectId, JBOperations.CLAIM) { ... }\n")),(0,a.kt)("details",null,(0,a.kt)("summary",null,"View a holder's unclaimed project token balance"),(0,a.kt)("p",null,"Each project token holder's unclaimed balance can be found in the ",(0,a.kt)("a",{parentName:"p",href:"/dev/api/contracts/jbtokenstore/"},(0,a.kt)("inlineCode",{parentName:"a"},"JBTokensStore"))," contract using ",(0,a.kt)("a",{parentName:"p",href:"/dev/api/contracts/jbtokenstore/properties/unclaimedbalanceof"},(0,a.kt)("inlineCode",{parentName:"a"},"JBTokenStore.unclaimedBalanceOf(...)")),"."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"function unclaimedBalanceOf(address _holder, uint256 _projectId) external view override returns (uint256) { ... }\n")),(0,a.kt)("p",null,"A project's total unclaimed token supply can be found using ",(0,a.kt)("a",{parentName:"p",href:"/dev/api/contracts/jbtokenstore/properties/unclaimedtotalsupplyof"},(0,a.kt)("inlineCode",{parentName:"a"},"JBTokenStore.unclaimedTotalSupplyOf(...)"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"function unclaimedTotalSupplyOf(uint256 _projectId) external view override returns (uint256) { ... }\n"))))}d.isMDXComponent=!0}}]);