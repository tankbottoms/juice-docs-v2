"use strict";(self.webpackChunkjuice_docs_v_2=self.webpackChunkjuice_docs_v_2||[]).push([[9335],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>m});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),d=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=d(e.components);return a.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},p=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),p=d(n),m=r,g=p["".concat(s,".").concat(m)]||p[m]||u[m]||i;return n?a.createElement(g,o(o({ref:t},c),{},{components:n})):a.createElement(g,o({ref:t},c))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=p;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,o[1]=l;for(var d=2;d<i;d++)o[d]=n[d];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}p.displayName="MDXCreateElement"},34879:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>l,toc:()=>d});var a=n(87462),r=(n(67294),n(3905));const i={},o="Multisig Transaction Guide",l={unversionedId:"user/guides/multisig-transaction-guide",id:"user/guides/multisig-transaction-guide",title:"Multisig Transaction Guide",description:"Multisig Process",source:"@site/docs/user/guides/multisig-transaction-guide.md",sourceDirName:"user/guides",slug:"/user/guides/multisig-transaction-guide",permalink:"/user/guides/multisig-transaction-guide",draft:!1,editUrl:"https://github.com/jbx-protocol/juice-docs-v2/blob/main/docs/user/guides/multisig-transaction-guide.md",tags:[],version:"current",frontMatter:{},sidebar:"user",previous:{title:"Risks",permalink:"/user/risks"},next:{title:"What's New in v2?",permalink:"/user/guides/new-in-v2"}},s={},d=[{value:"Multisig Process",id:"multisig-process",level:2},{value:"Routine",id:"routine",level:2},{value:"Juicebox v1.0 Multisig Actions",id:"juicebox-v10-multisig-actions",level:2},{value:"Treasury and Tickets",id:"treasury-and-tickets",level:3},{value:"Project Details",id:"project-details",level:3},{value:"Project Control",id:"project-control",level:3},{value:"Gnosis",id:"gnosis",level:3},{value:"Add Juicebox Safe",id:"add-juicebox-safe",level:2},{value:"How to write a \u201cconfigure\u201d transaction:",id:"how-to-write-a-configure-transaction",level:2},{value:"How to read a \u201cconfigure\u201d transaction:",id:"how-to-read-a-configure-transaction",level:2},{value:"Real transaction as example to explain",id:"real-transaction-as-example-to-explain",level:3}],c={toc:d};function u(e){let{components:t,...i}=e;return(0,r.kt)("wrapper",(0,a.Z)({},c,i,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"multisig-transaction-guide"},"Multisig Transaction Guide"),(0,r.kt)("h2",{id:"multisig-process"},"Multisig Process"),(0,r.kt)("p",null,"The Multisig Process was ratified by JBX holders in ",(0,r.kt)("em",{parentName:"p"},(0,r.kt)("a",{parentName:"em",href:"https://snapshot.org/#/jbdao.eth/proposal/0xaff54a1eebc16329758c925ff0fbbeb73718a0d06918609b1e8bbbf9c7cada68"},"JBP - 98 Ratify Multisig Process"),".")," Multisig members should be aware of the following stipulations:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"The Juicebox multisig and Juicebox multisig owner accounts must agree to execute the will of JBX token holders, as expressed through the Juicebox Governance Process.")),(0,r.kt)("li",{parentName:"ol"},"Existing multisig members must agree to these principles, and prospective multisig members must agree to these principles before being added to the multisig."),(0,r.kt)("li",{parentName:"ol"},"These principles are intended as general guidelines that formalize existing processes while being flexible enough to adapt as Juicebox changes over time.")),(0,r.kt)("h2",{id:"routine"},"Routine"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Check the ",(0,r.kt)("a",{parentName:"li",href:"https://gnosis-safe.io/app/eth:0xAF28bcB48C40dBC86f52D459A6562F658fc94B1e/transactions/queue"},(0,r.kt)("strong",{parentName:"a"},"transaction queue"))," to see pending transactions. Double check the transaction data and ",(0,r.kt)("a",{parentName:"li",href:"https://snapshot.org/#/jbdao.eth"},"relevant proposals")," ",(0,r.kt)("strong",{parentName:"li"},"before signing"),"."),(0,r.kt)("li",{parentName:"ul"},"Keep an eye on ",(0,r.kt)("inlineCode",{parentName:"li"},"#multisig")," in the JuiceboxDAO Discord server to coordinate with other multisig members"),(0,r.kt)("li",{parentName:"ul"},"The latest payouts and reserved JBX recipients can be found in ",(0,r.kt)("inlineCode",{parentName:"li"},"#bookkeeping.")," Queue the reconfiguration and notify others in ",(0,r.kt)("inlineCode",{parentName:"li"},"#multisig"),"."),(0,r.kt)("li",{parentName:"ul"},"Request gas reimbursements in ",(0,r.kt)("inlineCode",{parentName:"li"},"#bookkeeping"),".")),(0,r.kt)("h2",{id:"juicebox-v10-multisig-actions"},"Juicebox v1.0 Multisig Actions"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"For more information about v1 transactions, look at the ",(0,r.kt)("a",{parentName:"em",href:"https://docs.juicebox.money/"},"Juicebox Docs"),".")),(0,r.kt)("h3",{id:"treasury-and-tickets"},"Treasury and Tickets"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Transaction"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"TerminalV1.configure"),(0,r.kt)("td",{parentName:"tr",align:null},"Configure funding cycle properties including funding target, funding distribution, reserved tokens, etc.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"TerminalV1.printPreminedTickets"),(0,r.kt)("td",{parentName:"tr",align:null},"Print tickets to any address. Only works before payments have been received (no longer possible for JuiceboxDAO).")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"TerminalV1.migrate"),(0,r.kt)("td",{parentName:"tr",align:null},"Migrate funds and operations to a new contract.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"TicketBooth.issue"),(0,r.kt)("td",{parentName:"tr",align:null},"Issues an owner's ERC-20 Tickets that'll be used when unstaking tickets and deploys an owner's Ticket ERC-20 token contract.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"TerminalV1_1.printTickets"),(0,r.kt)("td",{parentName:"tr",align:null},"Print tickets to any address (Only available on V1.1 projects\u2014Allow minting tokens must be enabled).")))),(0,r.kt)("h3",{id:"project-details"},"Project Details"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Transaction"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Projects.setHandle"),(0,r.kt)("td",{parentName:"tr",align:null},"Set the project's handle.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Projects.setUri"),(0,r.kt)("td",{parentName:"tr",align:null},"Set the project's URI (IPFS CDN with project info).")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Projects.transferHandle"),(0,r.kt)("td",{parentName:"tr",align:null},"Transfer handle to another address.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Projects.claimHandle"),(0,r.kt)("td",{parentName:"tr",align:null},"Claim and apply a transferred handle.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Projects.renewHandle"),(0,r.kt)("td",{parentName:"tr",align:null},"Renew a handle to prevent claiming for a year after it is challenged.")))),(0,r.kt)("h3",{id:"project-control"},"Project Control"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Transaction"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"OperatorStore.setOperator"),(0,r.kt)("td",{parentName:"tr",align:null},"Give an address permission to take actions (full operation list) pertaining to a specified domain")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Projects.transfer"),(0,r.kt)("td",{parentName:"tr",align:null},"Transfer the ERC-721 that confers ownership in a Juicebox project to a new address.")))),(0,r.kt)("h3",{id:"gnosis"},"Gnosis"),(0,r.kt)("p",null,"All Gnosis actions are available on ",(0,r.kt)("a",{parentName:"p",href:"https://gnosis-safe.io/app/eth:0xAF28bcB48C40dBC86f52D459A6562F658fc94B1e/settings/owners"},"their app"),", use them for better UX."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Transaction"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"OwnerManager.addOwnerWithThreshold"),(0,r.kt)("td",{parentName:"tr",align:null},"Add a new owner to the Safe and update the threshold at the same time (check txn here)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"OwnerManager.removeOwner"),(0,r.kt)("td",{parentName:"tr",align:null},"Remove an owner from the Safe and update the threshold at the same time (check txn here)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"OwnerManager.changeThreshold"),(0,r.kt)("td",{parentName:"tr",align:null},"Update the number of owner accounts needed to confirm a Gnosis Safe transaction.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null})))),(0,r.kt)("h2",{id:"add-juicebox-safe"},"Add Juicebox Safe"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Go to ",(0,r.kt)("a",{parentName:"li",href:"https://gnosis-safe.io/app/"},"https://gnosis-safe.io/app/"))),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(46402).Z,width:"772",height:"538"})),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Click \u201cAdd existing Safe\u201d, input address \u201c0xAF28bcB48C40dBC86f52D459A6562F658fc94B1e\u201d")),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(91342).Z,width:"1676",height:"1126"})),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Label the owners if you\u2019d like")),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(76282).Z,width:"1678",height:"1092"})),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Finish the procedure, and next time you could find JuiceboxDAO on your Gnosis App.")),(0,r.kt)("h2",{id:"how-to-write-a-configure-transaction"},"How to write a \u201cconfigure\u201d transaction:"),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(85822).Z,width:"632",height:"558"})),(0,r.kt)("p",null,"First, add the ",(0,r.kt)("a",{parentName:"p",href:"https://gnosis-safe.io/app/eth:0xAF28bcB48C40dBC86f52D459A6562F658fc94B1e/apps?appUrl=https://juicebox.money"},"Juicebox app")," to Gnosis Safe:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"navigate to Gnosis Apps"),(0,r.kt)("li",{parentName:"ul"},"Add custom app -> ",(0,r.kt)("a",{parentName:"li",href:"https://juicebox.money/"},"https://juicebox.money/")),(0,r.kt)("li",{parentName:"ul"},'check "This app is not a Gnosis product and I agree to use this app at my own risk."'),(0,r.kt)("li",{parentName:"ul"},"click \u201cAdd\u201d")),(0,r.kt)("p",null,"You can access the Juicebox website with multisig wallet connected. Navigate to the JuiceboxDAO project and find the \u201cReconfigure upcoming\u201d button:"),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(96821).Z,width:"1090",height:"380"})),(0,r.kt)("p",null,"Click on it to reconfigure. You will be able to see the preview before submit transaction. If you submit the txn, call other members to sign it on Gnosis App."),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(47716).Z,width:"1180",height:"722"})),(0,r.kt)("h2",{id:"how-to-read-a-configure-transaction"},"How to read a \u201cconfigure\u201d transaction:"),(0,r.kt)("p",null,"Here are the interface definitions:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-solidity"},"/**\n      @notice \n      Configures the properties of the current funding cycle if the project hasn't distributed tickets yet, or\n      sets the properties of the proposed funding cycle that will take effect once the current one expires\n      if it is approved by the current funding cycle's ballot.\n      @dev\n      Only a project's owner or a designated operator can configure its funding cycles.\n      @param _projectId The ID of the project being reconfigured. \n      @param _properties The funding cycle configuration.\n        @dev _properties.target The amount that the project wants to receive in this funding stage. Sent as a wad.\n        @dev _properties.currency The currency of the `target`. Send 0 for ETH or 1 for USD.\n        @dev _properties.duration The duration of the funding stage for which the `target` amount is needed. Measured in days. Send 0 for a boundless cycle reconfigurable at any time.\n        @dev _properties.cycleLimit The number of cycles that this configuration should last for before going back to the last permanent. This has no effect for a project's first funding cycle.\n        @dev _properties.discountRate A number from 0-200 indicating how valuable a contribution to this funding stage is compared to the project's previous funding stage.\n          If it's 200, each funding stage will have equal weight.\n          If the number is 180, a contribution to the next funding stage will only give you 90% of tickets given to a contribution of the same amount during the current funding stage.\n          If the number is 0, an non-recurring funding stage will get made.\n        @dev _properties.ballot The new ballot that will be used to approve subsequent reconfigurations.\n      @param _metadata A struct specifying the TerminalV1 specific params _bondingCurveRate, and _reservedRate.\n        @dev _metadata.reservedRate A number from 0-200 indicating the percentage of each contribution's tickets that will be reserved for the project owner.\n        @dev _metadata.bondingCurveRate The rate from 0-200 at which a project's Tickets can be redeemed for surplus.\n          The bonding curve formula is https://www.desmos.com/calculator/sp9ru6zbpk\n          where x is _count, o is _currentOverflow, s is _totalSupply, and r is _bondingCurveRate.\n        @dev _metadata.reconfigurationBondingCurveRate The bonding curve rate to apply when there is an active ballot.\n      @return The ID of the funding cycle that was successfully configured.\n    */\nfunction configure(\n    uint256 _projectId,\n    FundingCycleProperties calldata _properties,\n    FundingCycleMetadata calldata _metadata,\n    PayoutMod[] memory _payoutMods,\n    TicketMod[] memory _ticketMods\n)\n\nstruct PayoutMod {\n    bool preferUnstaked;\n    uint16 percent;\n    uint48 lockedUntil;\n    address payable beneficiary;\n    IModAllocator allocator;\n    uint56 projectId;\n}\n\nstruct TicketMod {\n    bool preferUnstaked;\n    uint16 percent;\n    uint48 lockedUntil;\n    address payable beneficiary;\n}\n")),(0,r.kt)("h3",{id:"real-transaction-as-example-to-explain"},"Real transaction as example to explain"),(0,r.kt)("p",null,"Check Gnosis safe tx detail ",(0,r.kt)("a",{parentName:"p",href:"https://gnosis-safe.io/app/eth:0xAF28bcB48C40dBC86f52D459A6562F658fc94B1e/transactions/0x3c4ab13fcd7f62c4d6149b32fca3c64b1814d3931bb048bbbbce7cb681acdc68"},"here"),"."),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(30987).Z,width:"2398",height:"1308"})),(0,r.kt)("p",null,"What does this tx mean?"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"_projectId: 1")," we are configuring the JuiceboxDAO project"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"_properties: "))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-solidity"},"[\n// it's 117453.82 based on 18 decimals\n117453820000000000000000\n// 0 for ETH, 1 for USD\n// funding target: $117,453.82\n1\n// funding duration: 14 days\n14\n// cycle limit: 0\n0\n// discount rate: 10% (based on 1000)\n100\n// contract address https://etherscan.io/address/0x6d6da471703647Fd8b84FFB1A29e037686dBd8b2\n// ballot: 3-day delay\n0x6d6da471703647Fd8b84FFB1A29e037686dBd8b2\n]\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"_metadata:"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-solidity"},"[\n// reserve rate: 50% (based on 200)\n100\n// bonding curve: 95% (based on 200)\n190\n// reconfiguration bonding curve: 95%\n190\n]\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"_payoutMod:"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-solidity"},"[\n    [\n  // preferUnstaked: false\n    False\n  // percent: 13.4\n    1340\n  // lockedUntil: 0\n    0\n  // beneficiary: 0x823b...ADAD (jango.eth)\n    0x823b92d6a4b2AED4b15675c7917c9f922ea8ADAD\n  // allocator: zero address\n    0x0000000000000000000000000000000000000000\n  // only set this if you are paying other projects on Juicebox\n  // projectId: 0 (not project but address outside Juicebox ecosystem)\n    0\n    ]\n  // other payout mod\n  // ...\n]\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"_ticketMods:"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-solidity"},"[\n    [\n  // preferUnstaked: false\n    False\n  // percent: 1.92%\n    192\n  // lockedUtil: 0\n    0\n  // beneficiary: 0x823b...ADAD (jango.eth)\n    0x823b92d6a4b2AED4b15675c7917c9f922ea8ADAD\n    ]\n  // other ticket mod\n  // ...\n]\n")))}u.isMDXComponent=!0},46402:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/Untitled-b262a2a4e6d255ed114ed0e35b1567d5.png"},91342:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/Untitled1-44d8fb8aad2e5bac85757f918eeded46.png"},76282:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/Untitled2-1e518b776f5a4fd3d9a502a3bb26bf14.png"},85822:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/Untitled3-ef8f195545a7eb86c58e84f1e1e81398.png"},96821:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/Untitled4-881d22aa91f2cdb7f359bf74a1902f8f.png"},47716:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/Untitled5-5382749599749b22ad5f329dc190895f.png"},30987:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/Untitled6-fa32e2e3e719c0af8b7e60bb07f1d578.png"}}]);