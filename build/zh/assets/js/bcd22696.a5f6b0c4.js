"use strict";(self.webpackChunkjuice_docs_v_2=self.webpackChunkjuice_docs_v_2||[]).push([[31404],{3905:(e,t,a)=>{a.d(t,{Zo:()=>d,kt:()=>m});var r=a(67294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var c=r.createContext({}),s=function(e){var t=r.useContext(c),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},d=function(e){var t=s(e.components);return r.createElement(c.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},p=r.forwardRef((function(e,t){var a=e.components,n=e.mdxType,o=e.originalType,c=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),p=s(a),m=n,f=p["".concat(c,".").concat(m)]||p[m]||u[m]||o;return a?r.createElement(f,i(i({ref:t},d),{},{components:a})):r.createElement(f,i({ref:t},d))}));function m(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=a.length,i=new Array(o);i[0]=p;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:n,i[1]=l;for(var s=2;s<o;s++)i[s]=a[s];return r.createElement.apply(null,i)}return r.createElement.apply(null,a)}p.displayName="MDXCreateElement"},24924:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>l,toc:()=>s});var r=a(87462),n=(a(67294),a(3905));const o={},i="Data source",l={unversionedId:"dev/learn/glossary/data-source",id:"dev/learn/glossary/data-source",title:"Data source",description:"What everyone needs to know",source:"@site/docs/dev/learn/glossary/data-source.md",sourceDirName:"dev/learn/glossary",slug:"/dev/learn/glossary/data-source",permalink:"/zh/dev/learn/glossary/data-source",draft:!1,editUrl:"https://github.com/jbx-protocol/juice-docs-v2/blob/main/docs/dev/learn/glossary/data-source.md",tags:[],version:"current",frontMatter:{},sidebar:"dev",previous:{title:"Ballot",permalink:"/zh/dev/learn/glossary/ballot"},next:{title:"Delegate",permalink:"/zh/dev/learn/glossary/delegate"}},c={},s=[{value:"What everyone needs to know",id:"what-everyone-needs-to-know",level:4},{value:"What you&#39;ll want to know if you&#39;re building",id:"what-youll-want-to-know-if-youre-building",level:4}],d={toc:s};function u(e){let{components:t,...a}=e;return(0,n.kt)("wrapper",(0,r.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"data-source"},"Data source"),(0,n.kt)("h4",{id:"what-everyone-needs-to-know"},"What everyone needs to know"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"A data source contract is a way of providing extensions to a treasury that either override or augment the default ",(0,n.kt)("a",{parentName:"li",href:"/zh/dev/api/contracts/or-payment-terminals/or-abstract/jbpayoutredemptionpaymentterminal/"},(0,n.kt)("inlineCode",{parentName:"a"},"JBPayoutRedemptionPaymentTerminal"))," functionality."),(0,n.kt)("li",{parentName:"ul"},"A data source contract can be used to provide custom data to the ",(0,n.kt)("a",{parentName:"li",href:"/zh/dev/api/contracts/or-payment-terminals/or-abstract/jbpayoutredemptionpaymentterminal/write/pay"},(0,n.kt)("inlineCode",{parentName:"a"},"JBPayoutRedemptionPaymentTerminal.pay(...)"))," transaction and/or the ",(0,n.kt)("a",{parentName:"li",href:"/zh/dev/api/contracts/or-payment-terminals/or-abstract/jbpayoutredemptionpaymentterminal/write/redeemtokensof"},(0,n.kt)("inlineCode",{parentName:"a"},"JBPayoutRedemptionPaymentTerminal.redeemTokensOf(...)"))," transaction."),(0,n.kt)("li",{parentName:"ul"},"A data source is passed contextual information from the transactions, from which it can derive custom data for the protocol to use to affect subsequent behaviors in the pay and redeem transactions. Contextual information from the pay transaction is passed to the data source in the form of ",(0,n.kt)("a",{parentName:"li",href:"/zh/dev/api/data-structures/jbpayparamsdata"},(0,n.kt)("inlineCode",{parentName:"a"},"JBPayParamsData"))," , and contextual information from the redeem transaction is passed to the data source in the form of ",(0,n.kt)("a",{parentName:"li",href:"/zh/dev/api/data-structures/jbredeemparamsdata"},(0,n.kt)("inlineCode",{parentName:"a"},"JBRedeemParamsData")),"."),(0,n.kt)("li",{parentName:"ul"},"Data sources can revert under custom circumstances, which can be used to create a gated treasury, max token supply, min contribution amount, etc."),(0,n.kt)("li",{parentName:"ul"},"A data source is responsible for specifying any ",(0,n.kt)("a",{parentName:"li",href:"/zh/dev/learn/glossary/delegate"},"delegate")," hooks that should be triggered after the core functionality of a ",(0,n.kt)("a",{parentName:"li",href:"/zh/dev/api/contracts/or-payment-terminals/or-abstract/jbpayoutredemptionpaymentterminal/write/pay"},(0,n.kt)("inlineCode",{parentName:"a"},"pay(...)"))," or ",(0,n.kt)("a",{parentName:"li",href:"/zh/dev/api/contracts/or-payment-terminals/or-abstract/jbpayoutredemptionpaymentterminal/write/redeemtokensof"},(0,n.kt)("inlineCode",{parentName:"a"},"redeemTokensOf(...)"))," transaction executes successfully."),(0,n.kt)("li",{parentName:"ul"},"Each ",(0,n.kt)("a",{parentName:"li",href:"/zh/dev/api/interfaces/ijbpaymentterminal"},(0,n.kt)("inlineCode",{parentName:"a"},"IJBPaymentTerminal"))," fork can leverage data sources in unique ways.")),(0,n.kt)("h4",{id:"what-youll-want-to-know-if-youre-building"},"What you'll want to know if you're building"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"A data source must adhere to the ",(0,n.kt)("a",{parentName:"li",href:"/zh/dev/api/interfaces/ijbfundingcycledatasource"},(0,n.kt)("inlineCode",{parentName:"a"},"IJBFundingCycleDataSource"))," interface."),(0,n.kt)("li",{parentName:"ul"},"A data source contract can be specified in a funding cycle, along with flags that indicate if the funding cycle should ",(0,n.kt)("inlineCode",{parentName:"li"},"useDataSourceForPay")," and/or ",(0,n.kt)("inlineCode",{parentName:"li"},"useDataSourceForRedeem"),". These are set either in ",(0,n.kt)("a",{parentName:"li",href:"/zh/dev/api/contracts/or-controllers/jbcontroller/write/launchprojectfor"},(0,n.kt)("inlineCode",{parentName:"a"},"JBController.launchProjectFor(...)"))," or ",(0,n.kt)("a",{parentName:"li",href:"/zh/dev/api/contracts/or-controllers/jbcontroller/write/reconfigurefundingcyclesof"},(0,n.kt)("inlineCode",{parentName:"a"},"JBController.reconfigureFundingCyclesOf(...)")),"."),(0,n.kt)("li",{parentName:"ul"},"A funding cycle's data source is called upon in ",(0,n.kt)("a",{parentName:"li",href:"/zh/dev/api/contracts/jbsingletokenpaymentterminalstore/write/recordpaymentfrom"},(0,n.kt)("inlineCode",{parentName:"a"},"JBSingleTokenPaymentTerminalStore.recordPaymentFrom(...)"))," and in ",(0,n.kt)("a",{parentName:"li",href:"/zh/dev/api/contracts/jbsingletokenpaymentterminalstore/write/recordredemptionfor"},(0,n.kt)("inlineCode",{parentName:"a"},"JBSingleTokenPaymentTerminalStore.recordRedemptionFor(...)")),"."),(0,n.kt)("li",{parentName:"ul"},"A data source has implicit permisions to ",(0,n.kt)("a",{parentName:"li",href:"/zh/dev/api/contracts/or-controllers/jbcontroller/write/minttokensof"},(0,n.kt)("inlineCode",{parentName:"a"},"JBController.mintTokensFor(...)"))," on a project's behalf. "),(0,n.kt)("li",{parentName:"ul"},"If a data source is not specified in a funding cycle, or if flags aren't explicitly set, default protocol data will be used.")),(0,n.kt)("p",null,(0,n.kt)("a",{parentName:"p",href:"/zh/dev/build/treasury-extensions/data-source"},"Get started building data sources"),"."))}u.isMDXComponent=!0}}]);