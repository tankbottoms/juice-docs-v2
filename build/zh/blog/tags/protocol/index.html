<!doctype html>
<html lang="zh" dir="ltr" class="blog-wrapper blog-tags-post-list-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-rc.1">
<link rel="alternate" type="application/rss+xml" href="/zh/blog/rss.xml" title="Juicebox Docs RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/zh/blog/atom.xml" title="Juicebox Docs Atom Feed">
<link rel="alternate" type="application/json" href="/zh/blog/feed.json" title="Juicebox Docs JSON Feed">




<script src="https://energetic-unwavering.juicebox.money/script.js" defer="defer" data-site="UMYOVGDG"></script><title data-rh="true">9 ç¯‡åšæ–‡ å«æœ‰æ ‡ç­¾ã€Œprotocolã€ | Juicebox Docs</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://info.juicebox.money/zh/img/apple.png"><meta data-rh="true" name="twitter:image" content="https://info.juicebox.money/zh/img/apple.png"><meta data-rh="true" property="og:url" content="https://info.juicebox.money/zh/blog/tags/protocol"><meta data-rh="true" name="docusaurus_locale" content="zh"><meta data-rh="true" name="docsearch:language" content="zh"><meta data-rh="true" name="google-site-verification" content="0Jp7zERBL5i76DiM-bODvBGgbjuVMEQGSuwOchP_ZnE"><meta data-rh="true" property="og:title" content="9 ç¯‡åšæ–‡ å«æœ‰æ ‡ç­¾ã€Œprotocolã€ | Juicebox Docs"><meta data-rh="true" name="docusaurus_tag" content="blog_tags_posts"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_tags_posts"><link data-rh="true" rel="icon" href="/zh/img/favicon.svg"><link data-rh="true" rel="canonical" href="https://info.juicebox.money/zh/blog/tags/protocol"><link data-rh="true" rel="alternate" href="https://info.juicebox.money/blog/tags/protocol" hreflang="en"><link data-rh="true" rel="alternate" href="https://info.juicebox.money/zh/blog/tags/protocol" hreflang="zh"><link data-rh="true" rel="alternate" href="https://info.juicebox.money/blog/tags/protocol" hreflang="x-default"><link rel="stylesheet" href="/zh/assets/css/styles.7f3b6b29.css">
<link rel="preload" href="/zh/assets/js/runtime~main.3495319f.js" as="script">
<link rel="preload" href="/zh/assets/js/main.b7e89329.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):window.matchMedia("(prefers-color-scheme: light)").matches?e("light"):e("dark")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">è·³åˆ°ä¸»è¦å†…å®¹</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/zh/"><div class="navbar__logo"><img src="/zh/img/logo.png" alt="Juicebox Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/zh/img/logo.png" alt="Juicebox Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Juicebox</b></a><a class="navbar__item navbar__link" href="/zh/">Docs</a><a class="navbar__item navbar__link" href="/zh/user/">Project Creators</a><a class="navbar__item navbar__link" href="/zh/dao/">Juicebox DAO</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/zh/blog">Blog</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>ä¸­æ–‡</a><ul class="dropdown__menu"><li><a href="/blog/tags/protocol" target="_self" rel="noopener noreferrer" class="dropdown__link">English</a></li><li><a href="/zh/blog/tags/protocol" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active">ä¸­æ–‡</a></li></ul></div><a href="https://juicebox.money/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Juicebox<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="åˆ‡æ¢æµ…è‰²/æš—é»‘æ¨¡å¼ï¼ˆå½“å‰ä¸ºæš—é»‘æ¨¡å¼ï¼‰" aria-label="åˆ‡æ¢æµ…è‰²/æš—é»‘æ¨¡å¼ï¼ˆå½“å‰ä¸ºæš—é»‘æ¨¡å¼ï¼‰"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="æœ€è¿‘åšæ–‡å¯¼èˆª"><div class="sidebarItemTitle_pO2u margin-bottom--md">All posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/2022-07-18-sharkdao">SharkDAO, A Sub-DAO Raising Funds to Participate in the Nouns Ecosystem</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/2022-07-14-lexicon-devils">Lexicon Devils, A Metaverse Architecture Guild Running on Juicebox</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/daolicious-tips-for-starting-your-first-dao">DAOlicious tips for starting your first DAO</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/great-web3-governance-at-a-glance">Great web3 governance at a glance</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/how-a-treasury-can-make-or-break-your-dao">How a treasury can make or break your DAO</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/juicebox-the-token-minting-powerhouse">Juicebox, the token minting powerhouse</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/the-power-of-token-minting-explained">The power of token minting explained</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/juicebox-in-the-words-of-sage">Juicebox in the Words of Sage</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/2022-06-14-town-hall">2022-06-14 Town Hall Summary</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/juicebox-in-the-words-of-johnnyd">Juicebox in the Words of johnnyd</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/2022-06-07-town-hall">JuiceboxDAO Town Hall June 07, 2022</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/juicebox-in-the-words-of-mieos">Juicebox in the Words of Mieos</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/juicebox-in-the-world-of-nicholas">Juicebox in the Words of nicholas</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/2022-05-31-town-hall">2022-05-31 Town Hall Summary</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/a-day-in-the-life-of-wagmi-studios">A Day in the Life of Wagmi Studios</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/juicebox-in-the-world-of-aeolian">Juicebox in the Words of aeolian</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/how-juicebox-for-nfts">HOW Juicebox for NFT Projects?</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/2022-05-24-town-hall">2022-05-24 Town Hall Summary</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/why-juicebox-for-nfts">WHY Juicebox for NFT Projects?</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/juicebox-in-the-words-of-0xstvg">Juicebox in the Words of 0xSTVG</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/2022/05/17/recap-jb-town-hall">Recap: JB Town Hall 5-17-2022</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/2022-05-17-town-hall">2022-05-17 Town Hall Summary</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/juicebox-in-the-words-of-zeugh">Juicebox in the Words of Zeugh</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/questions-concerning-compensation">Questions Concerning Compensation</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/2022-05-11-town-hall">2022-05-11 Town Hall Summary</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/juicebox-in-the-words-of-drgorilla">Juicebox in the Words of DrGorilla</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/jb-members-conference-with-chinese-community-members">JB Members Conference with Chinese Community Members</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/where-are-they-now-filipv">Where Are They Now? With filipv</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/juicebox-benefits-program-update">Juicebox Benefits Program Update</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/juicebox-in-the-words-of-tankbottoms">Juicebox in the Words of tankbottoms</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/humor-all-too-humor">Humor, all too humor</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/juicebox-in-the-words-of-twodam">Juicebox in the Words of twodam</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/fc18-updates">FC#18 Updates: v2 and Beyond</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/juicebox-in-the-words-of-peri">Juicebox in the Words of peri</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/juicebox-in-the-words-of-jango">Juicebox in the Words of jango</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/juicebox-in-the-words-of-filipv">Juicebox in the Words of filipv</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/juicebox-in-the-words-of-zom-bae">Juicebox in the Words of Zom_Bae</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/unbridled-creativity">Unbridled Creativity: The DAO experience through the lens of Cryptovoxels</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/juicebox-benefits-program-explained">Juicebox Benefits Program Explained</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/tips-on-starting-a-successful-juicebox-project">Tips on Starting a Successful Juicebox Project by Synth</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/year-of-the-dev">Year of the Dev</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/juicebox-v1-1-change-log">Juicebox V1.1 Change log</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/reserved-rate-as-a-growth-tuning-mechanism">Reserved rate as a growth tuning mechanism</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/how-i-became-a-contributor-to-juicebox">How I became a contributor to Juicebox.</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/state-of-jbx">è§‚å¯Ÿ: JBX ä»£å¸ç°çŠ¶</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/dao-tooling-101">DAO å·¥å…·å…¥é—¨</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/juicebox-protocol-tokenomics">Juicebox protocol tokenomics</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/notice-juicebox-fundraise">NOTICE: Juicebox V1 inefficiencies</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/cross-layer-juicebox-pt-2">Cross-layer Juicebox protocol: follow up #1</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/multi-layer-juicebox">Cross-layer Juicebox Protocol</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/constitutiondao-refund-brainstorm">å¤„ç† ConstitutionDAO é€€æ¬¾çš„å‡ ä¸ªæ½œåœ¨æ–¹æ¡ˆ</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/overflow">æº¢å‡ºï¼šç”¨äºé€€æ¬¾ã€æ€’é€€ã€è¿”ç°åŠæä¾›å¯å®ç°åˆ©æ¶¦çš„ä¸€ä¸ªæœºåˆ¶ã€‚</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/current-state-of-juiceboxdao-membership">Current state of JuiceboxDAO membership</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/juicebox-observations-9-28-2021">Reserved tokens as a mechanism for effective token distribution</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/project-updates-9-21-2021">Project updates 9/21/2021</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/project-update">Project updates 9/7/2021</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/juicebox-v2">JuiceboxV2 Protocol</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/juicebox-funding-cycle-4-proposal">Juicebox: Project update and FC4 proposal</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/adding-juicebox-treasury-tokens-to-amms">Juicebox V2: Protocol adjustments useful for adding treasury tokens to AMMs</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/juicebox-postmortem-of-low-severity-bug-discovered-8-18-2021">Juicebox postmortem: Low severity bug discovered 8/18/2021</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/funding-cycle-3-proposal">Juicebox: Funding Cycle #3 proposal</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/juicebox-funding-cycle-2-proposal">Juicebox: Funding Cycle #2 proposal</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/juicebox-observations-8-3-2021">Juicebox Observations 8/3/2021</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/juicebox-roadmap-8-3-2021">JuiceboxDAO Roadmap 8/3/2021</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/juicebox-governance">Juicebox Governance</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/configuration-1-ballot">Configuration #1: Ballot</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/configuration-1-bonding-curve-rate-2">Configuration #1: Bonding Curve Rate</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/configuration-1-discount-rate">Configuration #1: Discount rate</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/is-juicebox-for-whales">Juicebox åè®®çš„ç›®æ ‡äººç¾¤æ˜¯èµ„æœ¬é²¸ğŸ‹ï¼ŸæŠ•èµ„çŒ¿ğŸ¦§ï¼Ÿå»ºè®¾æœ‹å…‹ğŸ‘¾ï¼Ÿåˆ›ä½œå®¶ğŸ¨ï¼Ÿå¼€å‘ä¾ âŒ¨ï¸ï¼Ÿè¿˜æ˜¯æ¯ä¸€ä¸ªä»¥å¤ªæ˜ŸäººğŸ‡ªğŸ‡¹ï¼Ÿ</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/configuration-1-reserved-jbx">Configuration #1: Reserved JBX</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/configuration-1-payouts">Configuration #1: Payouts</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/juicebox-dao-7-17-2021">Juicebox DAO 7/17/2021</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/premine">Premine</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh/blog/juicebox-deployed">Juicebox has been deployed</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><header class="margin-bottom--xl"><h1>9 ç¯‡åšæ–‡ å«æœ‰æ ‡ç­¾ã€Œprotocolã€</h1><a href="/zh/blog/tags">æŸ¥çœ‹æ‰€æœ‰æ ‡ç­¾</a></header><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/zh/blog/juicebox-v1-1-change-log">Juicebox V1.1 Change log</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2021-12-13T00:00:00.000Z" itemprop="datePublished">2021å¹´12æœˆ13æ—¥</time> Â· <!-- -->3 åˆ†é’Ÿé˜…è¯»</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://twitter.com/me_jango" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://pbs.twimg.com/profile_images/1414958948189413395/l89bNR2m_400x400.jpg" alt="Jango"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://twitter.com/me_jango" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Jango</span></a></div><small class="avatar__subtitle" itemprop="description">JuiceboxDAO Contributor</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>JuiceboxDAO is running final tests on an updated/forked version of its Terminal contract. Once deployed and approved by JuiceboxDAO, projects will be able to voluntarily migrate their funds and accounting parameters from the V1 terminal that is currently being used to this new V1.1 Terminal with just one transaction.</p><p>There are many broader changes being developed in a V2 release scheduled for the coming months. V1.1 is a simpler change that still manages to provide crucial utilities and fixes for projects operating on the protocol.</p><p>Here&#x27;s why a project might want to migrate to V1.1:</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features">Features<a class="hash-link" href="#features" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ul><li><strong>Pause -</strong> Projects will be able to pause contributions to their treasury as well as subsequent token issuance on a per-funding cycle basis. Any new transactions â€“ or pending low-gas transactions in flight â€“ that settle after a paused funding cycle has started will fail. </li><li><strong>Mint - </strong>Projects will be able to allow itself to mint more of its own tokens on a per-funding cycle basis. During a funding cycle where minting new tokens is allowed, the project owner can submit a transaction to increase the token supply and send this new supply to a beneficiary of its choice. </li></ul><p>Currently projects can only mint new tokens before receiving a first contribution.</p><ul><li><strong>Burn - </strong>Anyone will be able to burn their tokens by redeeming them, even when there is no overflow. </li></ul><p>Currently tokens are only burnable when there is some amount of overflow that is being reclaimed through the redemption.</p><ul><li><strong>Off-protocol redemption value - </strong>Projects will be able to supply a contract to their funding cycles that tell the protocol how much value it is holding off-protocol, like in a multisig wallet or yielding vault. Projects can use oracles in this contract to convert the value of any other asset it owns into ETH for the protocol to use when calculating redemption values.</li></ul><p>Currently redemption values are calculated only with the ETH the project has locked in the Juicebox Terminal contract.</p><ul><li><strong>Fee cap -</strong> The protocol fee is capped at 5%. JuiceboxDAO can adjust the JBX fee from 0% - 5%.</li></ul><p>Currently there is no fee cap. </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes">Bug fixes<a class="hash-link" href="#bug-fixes" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ul><li>Fixed bug that prevents a project from updating its reserved token tracker when the reserved rate is set to 0%. This bug prevented the project from reconfiguring from a 0% reserved rate to any other value without inadvertently creating an extra reserved token supply inso-doing. See this <a href="/zh/blog/tags/__GHOST_URL__/juicebox-postmortem-of-low-severity-bug-discovered-8-18-2021/">postmortem</a>. </li><li>Fixed bug that prevented overflow from being viewed correctly when a funding cycle rolls over before it has had its newly available funds distributed.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="other-adjustments">Other adjustments<a class="hash-link" href="#other-adjustments" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ul><li>The contract is now directly Ownable instead of using an ownable Governance contract proxy. The JuiceboxDAO will own the contract, which allows it to set the fee, and allow other forked Terminal contracts for projects to migrate onto.</li></ul></div><footer class="row docusaurus-mt-lg"><div class="col"><b>æ ‡ç­¾ï¼š</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/zh/blog/tags/protocol">protocol</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/zh/blog/reserved-rate-as-a-growth-tuning-mechanism">Reserved rate as a growth tuning mechanism</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2021-12-12T00:00:00.000Z" itemprop="datePublished">2021å¹´12æœˆ12æ—¥</time> Â· <!-- -->1 åˆ†é’Ÿé˜…è¯»</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://twitter.com/me_jango" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://pbs.twimg.com/profile_images/1414958948189413395/l89bNR2m_400x400.jpg" alt="Jango"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://twitter.com/me_jango" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Jango</span></a></div><small class="avatar__subtitle" itemprop="description">JuiceboxDAO Contributor</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>Communities using Juicebox can leverage their reserved rate decisively when they want to make it more difficult for new members to join. Funds can still be received, but more of the newly minted tokens will be owned by the project itself. The current project members can use this to decide how they will manage their subsequent growth on a per-funding cycle basis. </p><p>When the project wishes to make membership more accessible again, members can do so by lowering the reserved rate.</p><p>There&#x27;s currently a discussion happening in JuiceboxDAO deliberating if it might be wise to move its reserved rate from 35% to 50%.</p><p>The reserved rate can also be useful for other purposes, this is just one possible metaphor that can be used to guide decision making.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>æ ‡ç­¾ï¼š</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/zh/blog/tags/protocol">protocol</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/zh/blog/tags/guide">guide</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/zh/blog/notice-juicebox-fundraise">NOTICE: Juicebox V1 inefficiencies</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2021-11-27T00:00:00.000Z" itemprop="datePublished">2021å¹´11æœˆ27æ—¥</time> Â· <!-- -->1 åˆ†é’Ÿé˜…è¯»</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://twitter.com/me_jango" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://pbs.twimg.com/profile_images/1414958948189413395/l89bNR2m_400x400.jpg" alt="Jango"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://twitter.com/me_jango" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Jango</span></a></div><small class="avatar__subtitle" itemprop="description">JuiceboxDAO Contributor</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>Before you start a project on Juicebox V1 or contribute funds to one, understand the following inefficiencies. These are shortcoming of V1 that have imperfect work arounds for now.</p><ol><li>There is no pause button. The best you can do is configure the reserves rate to 100% if you do not want to give new contributors any tokens. You can set an address responsible for burning tokens as the reserved token recipient.</li><li>When a project&#x27;s reserved rate starts at 0% and is then reconfigured to be higher than 0%, a new token supply will become available to distribute to the preconfigured reserved token recipients according to the rate chosen. For example, if moved to 100%, the total supply will double. Again, you can set an address responsible for burning tokens as the reserved token recipient. </li></ol><p>This inefficiency was discovered on August 18th. Here&#x27;s <a href="/zh/blog/juicebox-postmortem-of-low-severity-bug-discovered-8-18-2021/">more</a>.
3. There is no direct burn transaction, but tokens will be burnt when redeemed. Therefor in order to burn, reconfigure your target such that there is overflow, then redeem tokens and then inject the overflow back into the treasury.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>æ ‡ç­¾ï¼š</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/zh/blog/tags/protocol">protocol</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/zh/blog/tags/observations">observations</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/zh/blog/cross-layer-juicebox-pt-2">Cross-layer Juicebox protocol: follow up #1</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2021-11-24T00:00:00.000Z" itemprop="datePublished">2021å¹´11æœˆ24æ—¥</time> Â· <!-- -->2 åˆ†é’Ÿé˜…è¯»</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://twitter.com/me_jango" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://pbs.twimg.com/profile_images/1414958948189413395/l89bNR2m_400x400.jpg" alt="Jango"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://twitter.com/me_jango" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Jango</span></a></div><small class="avatar__subtitle" itemprop="description">JuiceboxDAO Contributor</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>From the <a href="/zh/blog/multi-layer-juicebox/">original post</a>: </p><blockquote><p>The simplest option would be to just deploy the same Juicebox protocol in each EVM compatible L2 environment. This forces projects to choose which they would like to operate on, or manage their own complexity if they would like to operate across many. I&#x27;m guessing most projects would prefer to operate everywhere, if only it were easy to do so.</p></blockquote><p>What if the simplest option was the best option?</p><p>Although deploying the same Juicebox protocol in each EVM compatible L2 environment forces projects to choose which they would like to operate on, it might be most reasonable to pass along this choice and complexity to each project while suggesting thorough operational strategies to weave these isolated environments together at the DAO/social/governance layer.</p><p>Here are some potential operational guidelines, using JuiceboxDAO as an example:</p><ul><li>Juicebox protocol is deployed identically on several L2s and side chains. JuiceboxDAO creates a project on each one where fees will be collected and contributions accepted.</li><li>JuiceboxDAO will have different tokens on each chain. JuiceboxDAO membership is composed of a strategy that take each of these tokens into account. Members are responsible for managing the entirety of the DAO&#x27;s treasury across all chains.</li><li>JuiceboxDAO submits treasury reconfigurations to each chain independently. Each chain can have funding cycles that operate on different schedules, have different token issuance rates, and different ETH distributions. This flexibility can be used to orchestrate arbitrary multi-chain treasury designs, although also introducing management overhead. Extend to new environments responsibly.</li><li>JuiceboxDAO can move its ETH/tokens between environments adhering to the constraints of each chain, leaning on existing and upcoming generalized bridging infrastructure.</li><li>It can deploy converter contracts if it wishes to support conversions between each of its membership tokens.</li></ul><p>Any other project could choose to operate on one or many environments where the Juicebox protocol has been deployed. If they choose to operate on many, they would have to manage the complexity of doing so. Once projects have begun experimenting and settling on effective patterns, I&#x27;d hope a playbook would emerge as a reference for future projects.</p><p>Leaving multi-layer coordination for the social layer introduces some operational overhead and risk, but also keeps the protocol layer flexible and simple.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>æ ‡ç­¾ï¼š</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/zh/blog/tags/protocol">protocol</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/zh/blog/tags/observations">observations</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/zh/blog/multi-layer-juicebox">Cross-layer Juicebox Protocol</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2021-11-22T00:00:00.000Z" itemprop="datePublished">2021å¹´11æœˆ22æ—¥</time> Â· <!-- -->2 åˆ†é’Ÿé˜…è¯»</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://twitter.com/me_jango" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://pbs.twimg.com/profile_images/1414958948189413395/l89bNR2m_400x400.jpg" alt="Jango"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://twitter.com/me_jango" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Jango</span></a></div><small class="avatar__subtitle" itemprop="description">JuiceboxDAO Contributor</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>Projects building on Juicebox need payment terminals that cost its contributors less gas to pay and redeem.</p><p>To do so, projects need to be able to accept funds across many different L2s alongside mainnet.</p><p>The simplest option would be to just deploy the same Juicebox protocol in each EVM compatible L2 environment. This forces projects to choose which they would like to operate on, or manage their own complexity if they would like to operate across many. I&#x27;m guessing most projects would prefer to operate everywhere, if only it were easy to do so.</p><p>JuiceboxDAO runs on the juicebox protocol itself, if we do nothing at the protocol layer and go with this simple option we will come across the same dilemma. If instead we preemptively consider how we can adjust the Juicebox V2 protocol to make cross layer operation simple for us, we&#x27;ll likely also be making it simple for all projects who choose to build around juicebox treasuries.</p><p>An effective solution will take into consideration that:</p><ul><li><strong>projects do not want to fragment its community and governance across chains.</strong> All members should be cheering for funds to come in from wherever people care to contribute from, and the project&#x27;s distributed tokens in turn should provide the opportunity to govern its cumulative funds regardless of what chain they&#x27;re on. </li><li><strong>the issuance rate of the project&#x27;s tokens should be synchronizable across all available environments over time.</strong> As funding cycles roll over, it&#x27;s often the case that the weight of token distribution changes. Unless it is by design, there shouldn&#x27;t be arbitrage opportunities across chains. </li><li><strong>funding cycle reconfigurations should either be approved or fail across all environments.</strong> If a project proposes to reconfigure its funding parameters in one environment but the ballot to do so ends up failing, the change should also fail to take effect in all other environments. On the flip side, successful funding cycle reconfigurations should be reflected across chains.</li></ul><hr><p><em>Stay tuned for specific proposals from me of how this might be achieve across rollup L2s, and please contribute to the conversation with your own ideas so we can arrive at the best possible set of solutions together.</em></p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>æ ‡ç­¾ï¼š</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/zh/blog/tags/protocol">protocol</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/zh/blog/tags/observations">observations</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/zh/blog/juicebox-v2">JuiceboxV2 Protocol</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2021-09-03T00:00:00.000Z" itemprop="datePublished">2021å¹´9æœˆ3æ—¥</time> Â· <!-- -->11 åˆ†é’Ÿé˜…è¯»</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://twitter.com/me_jango" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://pbs.twimg.com/profile_images/1414958948189413395/l89bNR2m_400x400.jpg" alt="Jango"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://twitter.com/me_jango" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Jango</span></a></div><small class="avatar__subtitle" itemprop="description">JuiceboxDAO Contributor</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="current-state-of-things">Current state of things<a class="hash-link" href="#current-state-of-things" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>First thing&#x27;s first: a huge thank you to everyone who has played with the first version of the Juicebox protocol over the past month. You&#x27;ve taken a leap of faith on a very experimental and untested set of contracts and user experiences with the hopes that it would help you smoothly realize your vision. The protocol has helped a number of projects bootstrap their treasury and community, and these communities have in turn helped Juicebox root into the fertile soil that is the Ethereum social layer.</p><p>I&#x27;ve been observing how each project has been interacting with the protocol. I&#x27;ve been a part of exciting discussions where JB was a total enabler of ideas and creativity, and also ones where I&#x27;ve unfortunately had to be the bearer of bad news that the protocol doesn&#x27;t support the wild thought being proposed. I&#x27;ve seen people spin up projects and raise hundreds of ETH in hours, and seen people give up on the first screen because the &quot;button&quot; they were trying to click wasn&#x27;t actually a button. After only a few weeks of action I have a sense of what&#x27;s working, and I&#x27;ve got a laundry list of what could be better.</p><p>The goal is to steadily improve things over time. At the base contract layer however, progress must made in big leaps initially with the goal of eventually reaching a steady state as innovation moves to subsequent application layers. JuiceboxV2 is the first big leap. Its goal is simple: to enable more creativity, and remove all points of friction.</p><p>JuiceboxV1 was designed with the assumption that communities and project owners have adverse incentives. By using Juicebox, a project owner was committing to particular constraints so that their community could confidently embrace the finances of the game being proposed. Project owners could not mint or burn tokens at will, project owners could not dictate how many tokens were minted per ETH contributed, project owners could not limit who participated in a crowdfund, and project owners did not have a pause button.</p><p>Turns out this was a bad assumption to roll with at the base protocol layer. If a community and its owners are one and the same, flexibility is a requirement for total creative expression. It turns out that communities almost always crave a custom treasury strategy that fits their ethos and proposes a game that differentiates them from others. </p><p>Projects don&#x27;t usually have the engineering resources to build, test, and verify such solutions though. This has been a core value Juicebox has provided for people, along with a simple and powerful UI for community members to join in through and follow along with. So far, the frictions that Juicebox removes has justified the treasury strategy constraints that it introduces. </p><p>Let&#x27;s see if we can now do even better.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="proposed-changes">Proposed changes<a class="hash-link" href="#proposed-changes" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bring-your-own-mintburn-strategy">Bring your own mint/burn strategy<a class="hash-link" href="#bring-your-own-mintburn-strategy" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>You&#x27;ll now be able to bring your own contracts that outline the game you want to propose to your community. You&#x27;ll be able to plug and play with already-written strategies, or write your own custom one that fulfills your wildest ideas.</p><p>Writing a strategy can be simple, or as complex as you want. All that is required is providing a contract that adheres to <a href="https://github.com/jbx-protocol/juice-juicehouse/blob/version/2/packages/hardhat/contracts/interfaces/IFundingCycleDataSource.sol" target="_blank" rel="noopener noreferrer">the <code>IFundingCycleDataSource</code> interface</a>. You&#x27;ll be able to provide a strategy that decides what happens when someone makes a payment to your project, as well as one for when someone redeems their treasury tokens. </p><p>Here&#x27;s how writing a strategy around a payment works:</p><p>You can add a data source contract as a parameter to a funding cycle. Your data source must provide a function that implements the following function specification.</p><div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">payData</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token builtin" style="color:rgb(189, 147, 249)">address</span><span class="token plain"> _payer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token builtin" style="color:rgb(189, 147, 249)">uint256</span><span class="token plain"> _amount</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token builtin" style="color:rgb(189, 147, 249)">uint256</span><span class="token plain"> _baseWeight</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token builtin" style="color:rgb(189, 147, 249)">uint256</span><span class="token plain"> _reservedRate</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token builtin" style="color:rgb(189, 147, 249)">address</span><span class="token plain"> _beneficiary</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">calldata</span><span class="token plain"> _memo</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">external</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">returns</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token builtin" style="color:rgb(189, 147, 249)">uint256</span><span class="token plain"> weight</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">calldata</span><span class="token plain"> memo</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        IPayDelegate delegate</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The function receives a handful of parameters from the Juicebox protocol, and is expected to return a handful of parameters back. </p><p><strong>Inputs:</strong></p><ul><li><code>_payer</code> is the address that issued the ETH payment.</li><li><code>_amount</code> is the amount of the ETH payment received.</li><li><code>_baseWeight</code> is the weight of the funding cycle during which the payment is being made. This weight is determined by multiplying the previous cycle&#x27;s weight by the previous cycle&#x27;s discount rate. Each project&#x27;s first funding cycle&#x27;s weight is 10^24. </li><li><code>_reservedRate</code> is the reserved rate of the funding cycle during which the payment is being made. This percent is out of 200. </li><li><code>_beneficiary</code> is the address that the payer has specified to receive the resulting treasury tokens. </li><li><code>_memo</code> is the note that the payer has included in the payment.</li></ul><p><strong>Outputs:</strong></p><ul><li><p><code>weight</code> is the weight that the Juicebox protocol should use when minting treasury tokens. The total tokens minted will be <code>amount</code> * <code>weight</code>, where both variables are assumed to have 18 decimal places. Out of these minted tokens, some will be allocated to the <code>_beneficiary</code>, and the rest will be reserved to be distributed to the reserved token recipients according to the <code>_reservedRate</code>.</p></li><li><p><code>memo</code> is the memo to include with the protocol event that will be emitted as a result of the payment. </p></li><li><p><code>delegate</code> is the address of a contract that adheres to the <a href="https://github.com/jbx-protocol/juice-juicehouse/blob/version/2/packages/hardhat/contracts/interfaces/IPayDelegate.sol" target="_blank" rel="noopener noreferrer"><code>IPaymentDelegate</code> interface</a>. If a <code>delegate</code> is provided, it will receive a callback from the Juicebox protocol once it has fully processed the payment. You can return the zero address if you don&#x27;t need this functionality. The callback your delegate contract should implement is as follows:</p><p>  function didPay(
address _payer,
uint256 _amount,
uint256 _weight,
uint256 _count,
address _beneficiary,
string calldata memo
) external;</p></li><li><p><code>_payer</code> is the same as the one <em>passed in</em> to your data source.</p></li><li><p><code>_amount</code> is the same as the one <em>passed in</em> to your data source.</p></li><li><p><code>_weight</code> is the same as the one <em>returned from</em> your data source.</p></li><li><p><code>_count</code> is the number of tokens that were minted for the <code>_beneficiary</code>.</p></li><li><p><code>_beneficiary</code> is the same as the one <em>passed in</em> to your data source.</p></li><li><p><code>_memo</code> is the same as the one <em>returned from</em> your data source.</p></li></ul><p>The <code>recordPayment</code> function where all of these pieces come together can be found <a href="https://github.com/jbx-protocol/juice-juicehouse/blob/a668f03cd926bc4b0afdf35aa2d6e73a566b5d48/packages/hardhat/contracts/TerminalV2DataLayer.sol#L582" target="_blank" rel="noopener noreferrer">here</a>.</p><p>A data source and delegate can similarly be provided to your funding cycle that&#x27;ll shape the <code>recordRedemption</code> function:</p><div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">redeemData</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token builtin" style="color:rgb(189, 147, 249)">address</span><span class="token plain"> _holder</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token builtin" style="color:rgb(189, 147, 249)">uint256</span><span class="token plain"> _count</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token builtin" style="color:rgb(189, 147, 249)">uint256</span><span class="token plain"> _redemptionRate</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token builtin" style="color:rgb(189, 147, 249)">uint256</span><span class="token plain"> _ballotRedemptionRate</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token builtin" style="color:rgb(189, 147, 249)">address</span><span class="token plain"> _beneficiary</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">calldata</span><span class="token plain"> _memo</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">external</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">returns</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token builtin" style="color:rgb(189, 147, 249)">uint256</span><span class="token plain"> amount</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">calldata</span><span class="token plain"> memo</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        IRedeemDelegate delegate</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Inputs:</strong></p><ul><li><code>_holder</code> is the token holder that is redeeming.</li><li><code>_count</code> is the number of tokens being redeemed.</li><li><code>_redemptionRate</code> is the redemption rate of the funding cycle during which the redemption is being made.</li><li><code>_ballotRedemptionRate</code> is the redemption rate that should be used if the project currently has an active funding cycle reconfiguration ballot.</li><li><code>_beneficiary</code> is the address that the redeemer has specified to claim the treasury ETH as a result of redeeming tokens.</li><li><code>_memo</code> is the note that the redeemer has included in the redemption.</li></ul><p><strong>Outputs:</strong></p><ul><li><p><code>amount</code> is the amount of ETH that should be sent from your treasury to the <code>_beneficiary</code> as a result of redeeming/burning <code>_count</code> tokens.</p></li><li><p><code>memo</code> is the memo to include with the protocol event that will be emitted as a result of the redemption. </p></li><li><p><code>delegate</code> is the address of a contract that adheres to the <a href="https://github.com/jbx-protocol/juice-juicehouse/blob/version/2/packages/hardhat/contracts/interfaces/IRedemptionDelegate.sol" target="_blank" rel="noopener noreferrer"><code>IRedemptionDelegate</code> interface</a>. If a <code>delegate</code> is provided, it will receive a callback from the Juicebox protocol once it has fully processed the redemption, but before the <code>amount</code> is dispersed to the <code>_beneficiary</code>. You can return the zero address if you don&#x27;t want this functionality. Â The callback your delegate contract should implement is as follows:</p><p>  function didRedeem(
address _holder,
uint256 _count,
uint256 _amount,
address _beneficiary,
string calldata memo
) external</p></li><li><p><code>_holder</code> is the same as the one <em>passed in</em> to your data source.</p></li><li><p><code>_count</code> is the same as the one <em>passed in</em> to your data source.</p></li><li><p><code>_amount</code> is the same as the one <em>returned from</em> your data source.</p></li><li><p><code>_beneficiary</code> is the same as the one <em>passed in</em> to your data source.</p></li><li><p><code>_memo</code> is the same as the one <em>returned from</em> your data source.</p></li></ul><p>The <code>recordRedemption</code> function where all of these pieces come together can be found <a href="https://github.com/jbx-protocol/juice-juicehouse/blob/2c4a549d22dbcbce393672157636a75fe0e29b45/packages/hardhat/contracts/TerminalV2DataLayer.sol#L821" target="_blank" rel="noopener noreferrer">here</a>.</p><p>With these new tools projects can roll out all kinds of treasury strategies, such as:</p><ul><li>restricting payments to only certain addresses.</li><li>restricting payments to only addresses that hold certain other assets.</li><li>offering different levels of Â community membership depending on the state of the blockchain.</li><li>restricting payments to be within min/max payment amounts.</li><li>creating time weighted rewards.</li><li>restricting the max supply of community tokens.</li><li>customizing the amount of treasury tokens distributed per ETH received.</li><li>minting NFTs for new members.</li></ul><p>...or any combination of any of these, alongside any other rule you can express contractually.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="overflow-allowance">Overflow allowance<a class="hash-link" href="#overflow-allowance" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>Previously, a project could only access funds within its specified funding cycle target. All overflowed treasury funds over this target was only accessibly by treasury token holders.</p><p>Now, alongside specifying your funding cycle&#x27;s target, you can specify an amount that you can use from your project&#x27;s overflow on demand. </p><p>This is useful for allocating treasury funds for on-off use cases like bug-bounties, one-time contributions, audits, NFT bids, etc.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="open-mintburn">Open mint/burn<a class="hash-link" href="#open-mintburn" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>Previously, you could only mint tokens before receiving your first payment, and burning was only done through the redemption mechanism. All other tickets were distributed purely through the payment process according to funding cycle weights that decreased according to your configured discount rates over time.</p><p>You can now mint and allocate new treasury tokens at will. All token holders also now have the option to burn their tokens, for whatever reason.</p><p>This gives projects more flexibility to design their tokenomics the way they want, while also having an auto-distribution mechanism through Juicebox&#x27;s flexible built-in payment mechanism alongside.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="reserved-token-distribution-endpoints">Reserved token distribution endpoints<a class="hash-link" href="#reserved-token-distribution-endpoints" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>Previously, payout splits could be directed at Ethereum addresses, other Juicebox projects, and arbitrary contracts that inherit from a common interface. Reserved tokens could only go to Ethereum addresses.</p><p>Now, reserved token distributions can also be pointed at Ethereum addresses, the owner of other Juicebox projects, and arbitrary contracts that inherit from <a href="https://github.com/jbx-protocol/juice-juicehouse/blob/version/2/packages/hardhat/contracts/interfaces/ISplitAllocator.sol" target="_blank" rel="noopener noreferrer">this common interface</a>.</p><p>This is useful to allow for more composable token distributions. </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="pay-withdraw-and-redeem-can-all-be-paused">Pay, withdraw, and redeem can all be paused.<a class="hash-link" href="#pay-withdraw-and-redeem-can-all-be-paused" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>Previously, projects had not quick way to pause community interactions with its treasury.</p><p>Now, projects are able to individually pause function calls to pay, withdraw funds, and redeem tokens. These controls are configured into each funding cycle.</p><p>This gives projects quick levers to use to achieve certain treasury effects. </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="adjustable-fee">Adjustable fee<a class="hash-link" href="#adjustable-fee" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>Previously, all projects paid a 5% fee from payouts. </p><p>Now, projects will pay at maximum a 5% fee that is adjustable by the JuiceboxDAO. There is also a ceiling fee price that is adjustable by the JuiceboxDAO.</p><p>This helps the JuiceboxDAO accommodate more projects and experiments into its ecosystem.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a class="hash-link" href="#conclusion" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>JuiceboxV2 introduces a suite of tools that allow for wild new treasury strategies. What remains constant from V1 is the fact that configurations are locked into funding cycles â€“ if a project runs on 30 day funding cycles, they can specify creative dynamics into the funding cycle, but once the cycle begins changes can&#x27;t be made until the following one. Also like V1, projects that opt for no duration are choosing the flexibility to make any change on demand. </p><p>The <a href="https://github.com/jbx-protocol/juice-juicehouse/tree/version/2/packages/hardhat/contracts" target="_blank" rel="noopener noreferrer">implementation of the new contracts</a> is done, we&#x27;ve just now got to document, test, and audit everything. All code is public, as will be all documentation and conversation around this upgrade. </p><p>We need eyes and scrutiny. Please don&#x27;t hesitate to take a look and help pick things apart. If you plan on spending time on this, please reach out to the DAO in <a href="https://discord.gg/vwdZrUZb8r" target="_blank" rel="noopener noreferrer">our discord</a> and introduce yourself so we can make sure you&#x27;re rightly compensated for your work.</p><p>All projects currently running on Juicebox will be able to seamlessly migrate their treasury to V2. </p><p>LFG.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>æ ‡ç­¾ï¼š</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/zh/blog/tags/protocol">protocol</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/zh/blog/juicebox-postmortem-of-low-severity-bug-discovered-8-18-2021">Juicebox postmortem: Low severity bug discovered 8/18/2021</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2021-08-19T00:00:00.000Z" itemprop="datePublished">2021å¹´8æœˆ19æ—¥</time> Â· <!-- -->7 åˆ†é’Ÿé˜…è¯»</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://twitter.com/me_jango" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://pbs.twimg.com/profile_images/1414958948189413395/l89bNR2m_400x400.jpg" alt="Jango"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://twitter.com/me_jango" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Jango</span></a></div><small class="avatar__subtitle" itemprop="description">JuiceboxDAO Contributor</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>I discovered a low severity bug in the Juicebox protocol last night that affects projects that have received payments while configured with a reserved rate of 0% who later reconfigure the reserved rate to anything greater than 0%.</p><p>A temporary work around has been identified, and a game plan for removing the bug from the system is in the works.</p><p>To mitigate potential exploits before a patch is issued, an exploit breakout team decided to mint 0.5% of total SHARK supply (1,889,066.675747 SHARK) into the multi-sig wallet. This course of action was chosen to prevent further issues. These tokens can be burned if desired.</p><p>What follows is how I discovered the bug, the technical details about it, and what our next steps will be.</p><p><strong>TLDR:**</strong>Until further notice, projects are not advised to set their reserved rate to 0% if they intend to raise their reserved rate in the near future.**</p><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="context">Context<a class="hash-link" href="#context" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>To give them time to plan for for what&#x27;s next, SharkDAO needed a way to pause payments and new members coming in through Juicebox. Juicebox doesn&#x27;t support a <code>pause</code> function in its <a href="https://etherscan.io/address/0xd569D3CCE55b71a8a3f3C418c329A66e5f714431" target="_blank" rel="noopener noreferrer">TerminalV1</a> contract, so Peripheralist and I had to improvise alongside the SharkDAO community.
<img loading="lazy" src="/zh/assets/images/image-d29654ae27cb9fb8a8daeb87c91656b5.png" width="1908" height="640" class="img_ev3q">
First step was to remove the payment form from the UI. This keeps most people from sending in contributions, but someone dedicated to sending a payment would eventually find that the Juicebox contract could still be interacted with directly through other interfaces like Etherscan.</p><p>To even the playing field, I had the idea to raise SharkDAO&#x27;s reserved rate to 100%, meaning all payments coming in through the contract would allocate 100% of minted SHARK tokens to preprogrammed addresses instead of to the paying address. With no SHARK incentive for contributing payments, the community would be disincentivized to pay through back-door means, effectively creating the desired <code>pause</code> functionality. If anyone did send payments, we could easily refund them the money.</p><p>After running this plan by SharkDAO at a Sharktank town hall meeting, we decided to move forward with it. We would allocate any SHARK minted during this paused period to the multi-sig, which could later be burned if needed.</p><p>A few details to note: </p><ul><li>SharkDAO&#x27;s reserved rate has been set to 0% since its start. </li><li>SharkDAO does not use funding cycles with preset durations, meaning changes can be executed on-demand. </li><li>SharkDAO&#x27;s Juicebox project is owned by a Gnosis multi-sig requiring 3/5 signatures. I&#x27;m one of the signatories.</li></ul><p>Right after the call, I got together with multi-sig holders to execute the plan. After one transaction to TerminalV1&#x27;s <code>configure</code> function, the reserved rate was successfully updated. I immediately checked the UI to see if things were in order â€“ thats when I noticed that after having set the reserved rate to 100%, it was now possible to mint and distribute 100% of the current token supply to the preconfigured destination (the multi-sig). Since this distribute transaction is public, anyone who triggered this would effectively double the SHARK supply, and would leave us with unnecessary work after the fact to burn this unintended supply from the multi-sig and communicate the issue to the community.</p><p>I immediately instructed the multi-sig panel to send another <code>configure</code> transaction to TerminalV1 to change the reserved rate back to 0%, and explained that I had to double check something before we could move forward with the plan. This reverted us to the previous state, where payments made to the contract directly would bypass the intended <code>pause</code> that was being communicated in the UI.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="technical-details">Technical details<a class="hash-link" href="#technical-details" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>The root of the problem was fairly obvious to me once I noticed the distributable supply in the UI. Once we were back at a safer state, I began work to confirm my assumptions and test a workaround.</p><p>Many parts of the Juicebox mechanism&#x27;s design are gas optimized, meaning the transactions that are most frequently called are responsible for fewer state changes than those that are infrequently called. The <code>pay</code> transaction is by far the most frequently called, so very few state changes take place within this function: the payment is received, and the resulting amount of treasury tokens are minted to the payer in a staked format.</p><p>Importantly, the reserved token amount is <em>not</em> minted during a payment. Instead, this amount is calculated later when the <code>printReservedTickets</code> transaction is called. It does so by taking the current token total supply and minting an appropriate amount of new tokens to the preconfigured reserved addresses such that the reserved rate is respected. Most importantly, the mechanism then keeps track of the fact that it has minted reserved tokens for the current token supply so that it doesn&#x27;t create extra reserved tokens later. Given perfect information, it is in the economic best interest of the project to wait to call <code>printReservedTickets</code> if the reserved rate is going to increase, and in the community&#x27;s interest to call it before an increase. The opposite is also true. This dynamic allows the protocol to offload a high-gas storage operation from a frequently called <code>pay</code> function onto less frequently called operations.</p><p>Unfortunately, when the reserved rate is 0%, the <code>printReservedTickets</code> call assumes there&#x27;s no work to do, and returns before it has had a chance to update the tracker. This prevents anyone from locking in the rate before it is increased. In the <a href="https://github.com/jbx-protocol/juicehouse/blob/3555d7baf7fa8ba4bc350140201805c740e3df4e/packages/hardhat/contracts/TerminalV1.sol#L968" target="_blank" rel="noopener noreferrer">TerminalV1 file</a>, the solution is literally just putting line 968 below line 977:</p><p><img loading="lazy" src="/zh/assets/images/image-1-528644694da941466960bb9696b7393f.png" width="1870" height="512" class="img_ev3q">Current TerminalV1 implementation of <code>printReservedTickets</code></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="execution">Execution<a class="hash-link" href="#execution" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>I immediately proposed two workarounds to the SharkDAO admins:</p><ul><li>Keep the contract open.</li><li>Set the reserved rate to the minimum possible value (0.5%), distribute the allocated reserved tokens to the multi-sig, then move the reserved rate to 100% as intended.</li></ul><p>We decided to go with the second option since we needed to set a fair playing field to community members looking to pay, and we could later burn the relatively small amount of SHARK minted to the multi-sig.</p><p>I then spent a few hours recreating the the original bug in our integration test suite, and wrote an integration test for the proposed solution to confirm it would work as expected (I was making extra sure of everything at this point in the evening.) Once everything was confirmed on my end, I got together with the multi-sig holders to execute the three transactions:</p><ol><li>Change the reserved rate to 0.5%.</li><li>Distribute reserved treasury tokens to the multi-sig. (Anyone can trigger this, so Xaix did it from his personal wallet.)</li><li>Change the reserved rate to 100%.</li></ol><p>The side effect is that 1,889,066.675747 SHARK were minted to the multi-sig. Here&#x27;s a screenshot of what the UI looked like after step 1:</p><p><img loading="lazy" src="/zh/assets/images/Screen-Shot-2021-08-19-at-12.43.52-AM-1-80276cf97948f7bf3b9518bae0600ae8.png" width="1866" height="907" class="img_ev3q"><img loading="lazy" src="/zh/assets/images/Screen-Shot-2021-08-19-at-12.41.21-AM-845d3cdce886e38c2c7d5c7d5b53e685.png" width="944" height="268" class="img_ev3q">
And here&#x27;s what it looks like now:
<img loading="lazy" src="/zh/assets/images/image-2-d312e6ace88d653ee58dd3e01c574e29.png" width="978" height="340" class="img_ev3q">
We got all of this done in about 2.5 hours.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="takeaway">Takeaway<a class="hash-link" href="#takeaway" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>Despite having written extensive unit, integration, and load tests, this condition fell through the cracks. I will keep stressing to the community that Juicebox is still experimental software with high risks. I&#x27;m confident in the way it&#x27;s built and am committed to its improvement, but I&#x27;m not going to pretend that it is perfect.</p><p>The good news is that TerminalV1 has a built in mechanism to allow projects to choose to migrate to new terminal contracts that have been approved by JuiceboxDAO&#x27;s governance, so bugs like this can be fixed. </p><p>We are now working around the clock to get a TerminalV1_1 safely set up for migration, and extensively tested.</p><p><strong>In the meantime, projects are not advised to set their reserved rate to 0% if they intend to raise their reserved rate in the near future.</strong></p><p>Next steps:</p><ul><li>Deploy TerminalV1_1 that patches this bug.</li><li>Consider building a version of the Juicebox Terminal contract that supports pausing payments.</li><li>Seek more code reviews and audits, while offering bug bounties to hackers who want to help.</li></ul></div><footer class="row docusaurus-mt-lg"><div class="col"><b>æ ‡ç­¾ï¼š</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/zh/blog/tags/protocol">protocol</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/zh/blog/juicebox-dao-7-17-2021">Juicebox DAO 7/17/2021</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2021-07-17T00:00:00.000Z" itemprop="datePublished">2021å¹´7æœˆ17æ—¥</time> Â· <!-- -->1 åˆ†é’Ÿé˜…è¯»</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://twitter.com/me_jango" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://pbs.twimg.com/profile_images/1414958948189413395/l89bNR2m_400x400.jpg" alt="Jango"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://twitter.com/me_jango" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Jango</span></a></div><small class="avatar__subtitle" itemprop="description">JuiceboxDAO Contributor</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>The Juicebox contracts were deployed to Ethereum two days ago. Yesterday, <a href="https://twitter.com/peripheralist" target="_blank" rel="noopener noreferrer">@peripheralist</a>, who built the <a href="http://juicebox.money" target="_blank" rel="noopener noreferrer">juicebox.money</a> website, launched a generative art project called Tiles using the Juicebox protocol as its treasury, <a href="http://tiles.art" target="_blank" rel="noopener noreferrer">http://tiles.art</a>. He started a DAO around it, <a href="https://discord.gg/bgGwmjWJ85" target="_blank" rel="noopener noreferrer">https://discord.gg/bgGwmjWJ85</a>. </p><p>With Juicebox, we had built a business-model protocol. With Tiles, he built a beautiful, expressive, and flexible collection of generative art to rally a community around. Neither of us had much of an idea what would or should happen next, but I was excited to take a step back and find out.</p><p>My conclusion: From a growth perspective, we can either go out and look for more entrepreneurs and artists that could benefit from using Juicebox, or we can lean into TileDAO since it&#x27;s the one project that currently uses Juicebox. Since <code>building stuff &gt; shilling stuff</code> is an invariant for me, I think the best thing I can do right now as a $JBX token holder is to participate in TileDAO and help grow it. As other projects start considering building on Juicebox, our job will be to become supporting cast member of their community also.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>æ ‡ç­¾ï¼š</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/zh/blog/tags/protocol">protocol</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/zh/blog/tags/dao">dao</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/zh/blog/juicebox-deployed">Juicebox has been deployed</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2021-07-15T00:00:00.000Z" itemprop="datePublished">2021å¹´7æœˆ15æ—¥</time> Â· <!-- -->5 åˆ†é’Ÿé˜…è¯»</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://twitter.com/me_jango" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://pbs.twimg.com/profile_images/1414958948189413395/l89bNR2m_400x400.jpg" alt="Jango"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://twitter.com/me_jango" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Jango</span></a></div><small class="avatar__subtitle" itemprop="description">JuiceboxDAO Contributor</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p><em>The first of a series of blog posts explaining the Juicebox protocol, and the game plan for the first several months.</em></p><hr><p><strong>TLDR:</strong> The Juicebox protocol&#x27;s contracts have been deployed to Ethereum&#x27;s mainnet, and <a href="https://twitter.com/peripheralist" target="_blank" rel="noopener noreferrer">@peripheralist</a> has published a very slick site to interact with them.</p><p>Juicebox is a business-model-as-a-service and programmable treasury for community-owned Ethereum projects.</p><p>Go check it out at <a href="http://juicebox.money" target="_blank" rel="noopener noreferrer">juicebox.money</a>. You can begin using Juicebox as your project&#x27;s payment terminal with one gas-efficient transaction.
<img loading="lazy" src="/zh/assets/images/image-1-00cbe61f0580484ee3ccd027db901aac.png" width="2560" height="1600" class="img_ev3q">A project running on Juicebox.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="motivation">Motivation<a class="hash-link" href="#motivation" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>Long story short: indie artists and devs, DAOs, and public goods more generally, need a groovy way to capture the value they create, make reliable cashflow money out of it, and then share it back into the world. </p><p>The Juicebox protocol does this by allowing projects to make commitments about how its cashflow will be distributed <em>before </em>ever receiving payments, signaling to users how their money will be spent ahead of time<em>. </em>It works really well as a payment terminal and programmable treasury for projects that have mostly predictable costs (like staff payouts, service subscriptions, donations, budgeted initiatives, etc.), and who want to automatically reward their community as they become successful.</p><p><img loading="lazy" src="/zh/assets/images/Screen-Shot-2021-07-13-at-12.00.04-PM-bcb80e96e9feb8e7850f8b6c664bb61f.png" width="822" height="894" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-it-works">How it works<a class="hash-link" href="#how-it-works" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>With just one gas-efficient transaction, you can start funding and growing a Juicebox project, and configuring its treasury&#x27;s payouts.</p><p>Once deployed, anyone can fund your project either as a patron by making a payment directly through <a href="http://juicebox.money" target="_blank" rel="noopener noreferrer">juicebox.money</a>, or by using other contracts that take fees composably into the Juicebox protocol. Either way, they&#x27;ll receive your project&#x27;s community tokens in return.
<img loading="lazy" src="/zh/assets/images/Screen-Shot-2021-07-13-at-4.03.07-PM-edc6095bc9b1adb8d720bd349ad46451.png" width="1044" height="164" class="img_ev3q">People can pay you directly via an interface like <a href="http://juicebox.money" target="_blank" rel="noopener noreferrer">juicebox.money</a>.<img loading="lazy" src="/zh/assets/images/Screen-Shot-2021-07-13-at-1.24.21-PM-7ed933806dc1d76c1f75630c1e0d77aa.png" width="1710" height="530" class="img_ev3q">Or, inherit from <code>JuiceboxProject.sol</code> and use <code>_takeFee</code> to get paid contractually.
As the project owner, you can set a funding target that specifies how much it&#x27;ll cost to create and operate your project for a set amount of time. You do this <em>before</em> anyone sends you money. If your project earns more than its funding target in a set period of time, the overflow can be redeemed by your supporters alongside you in exchange for burning tokens. This effectively pushes everyone&#x27;s price to pay for your project towards zero as usage grows.</p><p>If left unclaimed, overflow serves as a runway for projects.</p><p>A project&#x27;s team and its community are thus incentivized to work together to make sure overflow growth outpaces spending.
<img loading="lazy" src="/zh/assets/images/image-2-1b63811fa9e5d3f119fd4244860ea016.png" width="1054" height="314" class="img_ev3q">
Funding cycles roll over automatically, allowing people and contracts to affordably fund projects that are important to them on an ongoing basis.</p><p>You can configure a discount rate to incentivize earlier adopters, a bonding curve rate to incentive commitment from community members, and a reserved rate to receive some of your own tokens each time someone pays you and receives tokens themselves.
<img loading="lazy" src="/zh/assets/images/image-3-709a34c491b69c1ead80978aa0060932.png" width="988" height="808" class="img_ev3q">
Project owners can re-asses their funding needs and cycle configuration over time, and can choose to take their token holders&#x27; perspectives into account while publishing these sorts of changes to Juicebox.</p><hr><p>There are several ways to configure your Juicebox projects. Here are few cool things you can do:</p><ol><li>You can route your income stream through the Juicebox contracts.</li></ol><p>For example, you can make a version of Uniswap that explicitly only needs <strong>$X</strong> per month to be sustainably run (labor, ops), where each swap transaction incurs a fee <strong>($Y)</strong> that goes towards sustaining the service. If there are enough swaps that month <strong>(N)</strong> such that <strong>N * $Y &gt; $X</strong>, then for each subsequent swap, all accounts that have swapped (and therefor paid fees) receive a dividend from the overflowed revenue that is proportional to the amount they&#x27;ve contributed to the project&#x27;s sustainability thus far. So if <strong>N * $Y</strong> grows unjustifiably faster than <strong>$X</strong> â€” which is the underlying market rent-seeking inefficiency that Juicebox projects try to out-compete â€” then instead of compounded shareholder wealth aggregation, everyone&#x27;s price tends towards zero.</p><p>Meaning people get a nearly-free, community-driven product with no ads, guaranteed data integrity, full business operation accountability, and an open source code base that runs reliably. All built by motivated punks that are getting paid what they ask for and are rewarded alongside the community as overflow grows.
2. It&#x27;s easy to program financial dependencies, so your Juicebox project&#x27;s funding target can be contractually hooked up to those of people and projects it depends on.
3. You can run a recurring/one-time fundraising campaign and return extra funds to your community, or to other causes.
4. As the project owner, you can earn some of your own tokens with every payment you receives. You&#x27;ll &quot;unlock&quot; these tokens at the rate with which your overflow grows, not according to some arbitrary multi-year vesting schedule. These reserved tokens can then be contractually distributed to staff, or to other causes.</p><hr><p>There&#x27;s nothing more exciting than working on/with/for the Ethereum ecosystem these days â€“ new artful minds are being welcomed into cryptowallet-life everyday, and brilliant experiments are being crafted on the regular. It&#x27;s a creator&#x27;s dream â€“ there&#x27;s no need to manage infrastructure, Â growth is driven by your community, and financial expectations can be anchored down by code. The Juicebox protocol was created as a means to further this end. </p><p>If you have questions or want to contribute, don&#x27;t hesitate to <a href="https://discord.gg/6jXrJSyDFf" target="_blank" rel="noopener noreferrer">hop into the Discord</a>.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>æ ‡ç­¾ï¼š</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/zh/blog/tags/protocol">protocol</a></li></ul></div></footer></article><nav class="pagination-nav" aria-label="åšæ–‡åˆ—è¡¨åˆ†é¡µå¯¼èˆª"></nav></main></div></div></div></div>
<script src="/zh/assets/js/runtime~main.3495319f.js"></script>
<script src="/zh/assets/js/main.b7e89329.js"></script>
</body>
</html>